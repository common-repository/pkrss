var pkrssnewsmodule_item_briefnews={name:"briefnews",text:"Brief news",actived:false,inited:false,init:function(){if(this.inited){return}this.inited=true;pkrsslib.addCssContent("#briefnews_cotainer .rss_title {  font-weight: bold;  text-align: left;  text-overflow:ellipsis;  white-space:nowrap;}#briefnews_cotainer .rss_title a{	text-decoration:none;}.rss_briefbottom{  border-bottom: 1px solid rgba(69,54,37,0.2);  display: block;}.rss_briefbottom a{  text-decoration:none;}.rss_bottom,.rss_bottom a,.rss_briefbottom, .rss_briefbottom a{  clear: both;   color: rgba(69,54,37,0.6);  line-height: 1.5em;  height: 1.5em;}");pkrss.q('<div id="briefnews_info"> <ol id="briefnews_cotainer"></ol></div>').appendTo(pkrss.q("#plugin_container"));pkrss.q(window).scroll(function(){if(!pkrssnewsmodule_item_briefnews.actived){return}if(pkrss.q(window).scrollTop()==pkrss.q(document).height()-pkrss.q(window).height()){pkrss.q("#loadmoreajaxloader").show();pkrssnewsmodule_item_briefnews.loadrssitem(true)}})},oldparent:null,onActive:function(){this.actived=true;if(!this.inited){this.init()}var a=document.getElementById("container");a.style.height="";if(!this.oldparent){this.oldparent=pkrss.q("#briefnews_info").parent()}pkrss.q("#briefnews_info").appendTo("#container");this.loadrssitem(false)},onDeactive:function(){this.actived=false;pkrss.q("#briefnews_info").appendTo(this.oldparent);pkrss.q("#loadmoreajaxloader").hide();pkrss.q("#briefnews_cotainer").empty()},loadrssitem:function(a){if(!a){pkrsslib.inittabfulllistitem(pkrsslib.curlocaleid(),pksetting.user.selectedCId,pksetting.user.selectedTId,1,20);pkrss.q("#briefnews_cotainer").empty()}pkrsslib.moretabfulllistitem(function(b){if(pkrssnewsmodule_item_briefnews.actived){pkrssnewsmodule_item_briefnews.onHandle(b)}})},onHandle:function(d){if(d&&d.length){var j="";var b="";var h=pkrsslib.bbsurl+"pkrss_reply.php?mod=reply";if(pkrsslib.bbsurl.indexOf("discuz")>=0){h=pkrsslib.bbsurl+"source/plugin/pk17s_cn/replynew.php?mod=replysend"}if(pksetting.requestParam("replyurl")!=""){b="&replyurl="+pksetting.requestParam("replyurl")}for(var f in d){var i=d[f];var g=i.cid?i.cid:0;var a=i.tid?i.tid:0;j+="<li>";j+="<p class='rss_title'><a href='"+i.link+"' target='_blank' id='rss_desc_"+i.id+"'>"+i.title+"</a></p>";if(i.img&&i.img.length){for(imgindex in i.img){var c=i.img[imgindex];j+="<div style='width:"+c.width+"px;height:"+c.height+"px;float:left;;margin-right:12px;margin-bottom:12px;'><img src='"+c.url;j+="' width='"+c.width+"px' height='"+c.height+"px'";j+=" /></div>"}}j+="<p>"+pkrsslib.utils.replaceHtmlEntites(i.description)+"</p> ";j+='<p class="rss_briefbottom">'+i.pubDate+" ";j+="<span class='text_oneline'>";if(i.catalogname){j+="<a href='javascript:pkrss2.changeRssTable("+g+",0);'>";j+="<img width='16px' height='16px' src='"+pkurlsurlpath+"images/catalog/"+pkrsslib.getnavinfo(g).key+".png' alt='rss catalog logo' />";j+=i.catalogname;j+="</a>&nbsp-&nbsp"}var e="";if(i.tablename){e=i.tablename}else{if(i.src){e=i.src}else{e=i.author}}if(e&&(e!="")){j+="<a href='javascript:pkrss2.changeRssTable("+g+","+a+");'>";j+="<img width='16px' height='16px' src='"+i.link.substring(0,i.link.indexOf("/",9))+"/favicon.ico' alt='rss logo' />";if(i.tablename){j+=i.tablename}else{if(i.src){j+=i.src}else{j+=i.author}}j+="</a>"}j+="&nbsp;&nbsp;|&nbsp;&nbsp;<a href='"+h+"&iid="+i.id+b+"' target='_blank'>"+pkgetLocaleString("Reply")+"</a>&nbsp;&nbsp;";j+="<a href='javascript:rssitem_share("+i.id+");'>"+pkgetLocaleString("Share")+"</a>&nbsp;&nbsp;";j+="<a href='javascript:pkrss2.addplay("+i.id+");'>"+pkgetLocaleString("Play")+"</a>&nbsp;&nbsp;";j+=" </span>";j+="</p>";j+="</li>"}if(d.aditems){j+=d.aditems.join("")}pkrss.q("#briefnews_cotainer").append(j);pkrss.q("#loadmoreajaxloader").hide()}else{}if(pkrss.q(document).height()<=pkrss.q(window).height()+575+pkrss.q(window).scrollTop()){setTimeout(function(){pkrssnewsmodule_item_briefnews.loadrssitem(true)},1300)}}};pkrsslib.addCssContent(".pkico-nenwsmodule-briefnews{	background-position: -48px -264px !important;}");pkrssnewsmodule.addmodule(pkrssnewsmodule_item_briefnews);