pkrss.cls.newstype_newspaper_media=function(){pkrss.cls.newstype_module_base.call(this);this.name="media";this.text="Media news";this.actived=false;this.model=null;this.container=null;this.containerid="medianews_info";this.oldparent=null};pkrss.cls.newstype_newspaper_media.prototype.init=function(c,a){if(this.model){return}this.model=c;this.container=a;var e='<div id="'+this.containerid+'">	<div id="jp_container_1" class="jp-video jp-video-270p">			<div class="jp-type-playlist">				<div id="jquery_jplayer_1" class="jp-jplayer"></div>				<div class="jp-gui">					<div class="jp-video-play">						<a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>						<embed id="jp-embed-obj" src="" quality="high" width="100%" height="100%" align="middle" allowScriptAccess="always" allowFullScreen="true" mode="transparent" type="application/x-shockwave-flash">						</embed>					</div>					<div class="jp-interface">						<div class="jp-progress">							<div class="jp-seek-bar">								<div class="jp-play-bar"></div>							</div>						</div>						<div class="jp-current-time"></div>						<div class="jp-duration"></div>						<div class="jp-controls-holder">							<ul class="jp-controls">								<li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>								<li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>								<li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>								<li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>								<li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>								<li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>								<li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>								<li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>							</ul>							<div class="jp-volume-bar">								<div class="jp-volume-bar-value"></div>							</div>							<ul class="jp-toggles">								<li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>								<li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>								<li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a></li>								<li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a></li>								<li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>								<li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>							</ul>						</div>						<div class="jp-title">							<ul>								<li></li>							</ul>						</div>					</div>				</div>				<div class="jp-playlist">					<ul>						<li></li>					</ul>				</div>				<div class="jp-no-solution">					<span>Update Required</span>					To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.				</div>			</div>		</div>	</div>	';pkrss.q("#plugin_container").append(e);pkrss.utils.html.addCssFile(pkrss.ajax.pkurlresurlpath+"css/third/jquery-jplayer/blue.monday/jplayer.blue.monday.css");var d="jPlayerPlaylist";if(pkrss.getObjFromNamespace(d)){this.init2();return}var b=this;pkrss.utils.html.loadPlateformJs([{ns:"jQuery.jPlayer",src:pkrss.ajax.pkurlresurlpath+"js/third/jquery-jplayer/jquery.jplayer.js"},{ns:d,src:pkrss.ajax.pkurlresurlpath+"js/third/jquery-jplayer/add-on/jplayer.playlist.js",depends:["jQuery.jPlayer"]}],function(f){if(!f){return}b.init2();b=null;changenow=null})};pkrss.cls.newstype_newspaper_media.prototype.init2=function(){var a=new jPlayerPlaylist({jPlayer:"#jquery_jplayer_1",cssSelectorAncestor:"#jp_container_1"},[],{swfPath:pkrss.ajax.pkurlresurlpath+"js/third/jquery-jplayer",supplied:"flv,webmv, ogv, m4v, oga, mp3, ogg, wav",smoothPlayBar:true,keyEnabled:true,audioFullScreen:true,solution:"flash, html"});pkrss.q(a.cssSelector.jPlayer).bind(pkrss.q.jPlayer.event.error,function(b){});this.onChecked(a)};pkrss.cls.newstype_newspaper_media.prototype.onChecked=function(a){this.player=a;if(this.actived){this.loadrssitem(false)}pkrss.model.newstype.module.addmodule(this);pkrss.model.newstype.module.changemodule(this.name)};pkrss.cls.newstype_newspaper_media.prototype.onActive=function(){this.actived=true;if(!this.model){return}var a=document.getElementById("container");a.style.height="";var b=pkrss.q("#"+this.containerid);if(!this.oldparent){this.oldparent=b.parent()}this.container.append(b);if(this.player){this.loadrssitem(false)}pkrss.event.bind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_media.prototype.onDeactive=function(){this.actived=false;var a=pkrss.q("#"+this.containerid);this.oldparent.append(a);if(this.player){this.player.setPlaylist([])}pkrss.event.unbind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_media.prototype.onCatalogTableChanged=function(){pkrss.model.newstype.newspaper.media.loadrssitem(false)};pkrss.cls.newstype_newspaper_media.prototype.loadrssitem=function(a){if(!this.actived){return}if(!a){if(this.player){this.player.setPlaylist([])}}var b=this;this.model.loadPageData(function(c){if(b.actived){b.onHandle(c)}b=null},!a,"456")};pkrss.cls.newstype_newspaper_media.prototype.onHandle=function(e){if(e&&e.length){var c,f,d;for(var b in e){c=e[b];if(c.media&&c.media.length){for(var a in c.media){f=c.media[a];d={title:c.title,artist:c.id};if(f.type=="application/x-shockwave-flash"){d.flv=f.url}else{if(f.type=="media/video"){if(f.url.substring(f.url.length-4)==".m4v"){d.m4v=f.url}else{if(f.url.substring(f.url.length-4)==".mp4"){d.m4v=f.url}else{if(f.url.substring(f.url.length-4)==".ogv"){d.ogv=f.url}else{if(f.url.substring(f.url.length-4)==".ogg"){d.ogv=f.url}else{if(f.url.substring(f.url.length-4)==".webm"){d.webmv=f.url}}}}}}else{if(f.type=="media/audio"){if(f.url.substring(f.url.length-4)==".oga"){d.oga=f.url}else{if(f.url.substring(f.url.length-4)==".wav"){d.wav=f.url}else{d.mp3=f.url}}}}}this.player.add(d)}}}this.player._createItemHandlers()}};pkrss.define("pkrss.model.newstype.newspaper",{media:new pkrss.cls.newstype_newspaper_media()});