function modelview_locale(){this.localeSelector="#pk_ul_locale"}modelview_locale.prototype.init=function(c,a){this.localeSelector=c;var b=this;pkrss.model.locale.init(false,function(d){b.loadlocales(pkrss.q(b.localeSelector),d);a(d)})};modelview_locale.prototype.loadlocales=function(f,b){var d="";if(b){var e=false;for(var c in b){if(b[c].locale==pkrss.profile.usersetting.locale){e=true;pkrss.profile.usersetting.selectedLId=b[c].id}}if(!e){pkrss.profile.usersetting.locale="en"}for(var c in b){var a=b[c];d+="<li ";if(a.locale==pkrss.profile.usersetting.locale){d+='class="pkflagico_sel"';pkrss.profile.usersetting.selectedLId=a.id}d+='><a href="#" onclick="return pkrss.modelview.locale.changelocale(\''+a.id+'\')" id="pk_locale_'+a.id+'" class="pk_locale" title="'+a.country+'"><span class="pkflagico pkflagico-'+a.locale+'"></span></a></li>'}}f.html(d)};modelview_locale.prototype.changelocale=function(c){var a=pkrss.profile.usersetting;var b=a.selectedLI;a.selectedLId=c;a.selectedCId=0;a.selectedTId=0;pkrss.q(".pkflagico_sel").removeClass("pkflagico_sel");pkrss.q("#pk_locale_"+c).parent().addClass("pkflagico_sel");pkrss.event.trigger(pkrss.model.event.localeChanged,{lid:c,oldTid:b});return false};pkrss.define("pkrss.modelview",{locale:new modelview_locale()});