pkrss.cls.rightpanel_picimg=function(){this.actived=false;this.init()};pkrss.cls.rightpanel_picimg.prototype.init=function(){pkrss.utils.html.addCssContent("#pkimgplugin_container_bg{	position: fixed; top: 0; left: 0;}.pkimgplugin_effect_transparent{	background:transparent !important;}.pkimgplugin_effect_opacity{	filter:alpha(opacity=80) !important;	-moz-opacity:0.8 !important;	-khtml-opacity: 0.8 !important;	opacity: 0.8 !important;}.btn_picimgplugin_item{	display:inline-block !important;	border:0 !important;}#tool_right_pane_item_imgplugin_con div,#tool_changefontsize_pane span,#tool_changefontsize_pane a,#tool_changefontsize_pane a em{	display:inline-block !important;}#tool_right_pane_item_imgplugin_con > div{	border-bottom: 1px solid rgba(69,54,37,0.2);}.tool_ui_pane_label{	color: #453625;}.bgfn_img {	background:url("+pkrss.ajax.pkurlresurlpath+"../images/default/bg_fn.png) no-repeat left top;}.btn_refsize {	background-position: -56px -89px;	width:32px;	height:32px;}.btn_decsize {  background-position: -56px -121px;	width:32px;	height:32px;}");this.setup_rpbtn();this.init2()};pkrss.cls.rightpanel_picimg.prototype.init2=function(){this.initimgs();this.initdatahandle();this.setup_fontresize_pane()};pkrss.cls.rightpanel_picimg.prototype.setup_rpbtn=function(){var a='<div id="tool_right_pane_item_imgplugin_con" class="tool_float_pane_container">	<div style="margin-left:10px;">		<div id="tool_changefontsize_pane">			<span id="tool_changefontsize_pane_label" class="tool_ui_pane_label">Font size:</span>			<a href="javascript:void(0);" id="tool_changefontsize_pane_addsize" title="Larger"><em class="bgfn_img btn_refsize"></em></a>			<a href="javascript:void(0);" id="tool_changefontsize_pane_decsize" title="Smaller"><em class="bgfn_img btn_decsize"></em></a>		</div>	</div>  <div style="margin-left:10px;">		<div id="tool_changebg_pane">			<span id="tool_changebg_pane_label" class="tool_ui_pane_label">'+pkgetLocaleString("Background")+':</span>			<a href="javascript:;" class="btn_picimgplugin_item btn_picimgplugin_itemevent" style="height:46px;width:46px;"><img src="" width="48" height="48" alt=" "/></a>			<a href="javascript:;" class="btn_picimgplugin_item btn_picimgplugin_itemevent" style="width:120px;"><input id="btn_picimgplugin_loadimgbtn" type="file" multiple="" accept="image/*" onchange="pkrss.modelview.rightpanel.picimg.operInputFile(this);" /></a><br />		</div>		<div style="padding-left:10px;width:100%;height:10px;"></div>	</div></div>';pkrss.q("#plugin_container").append(a);pkrss.modelview.rightpanel.floatpanel(pkrss.q("#tool_right_pane_item_imgplugin"),"_con","tool_right_pane_li_a_sel")};pkrss.cls.rightpanel_picimg.prototype.onWindowResize=function(){if(!this.actived){return}var a=pkrss.q("#tool_right_pane_item_imgplugin_bg");var b=pkrss.q(window);a.width(b.width()-5);a.height(b.height()-5)};pkrss.cls.rightpanel_picimg.prototype.onImgClick=function(b){b=pkrss.q(b);var c=b.children("img");c=c.prop("src");var d=pkrss.q("#pkimgplugin_container_bg");d.prop("src",c);if(!c||(c=="")){d.hide("slow")}else{d.show("slow")}var e=pkrss.q("#container");if(c==""){this.actived=false;pkrss.q("#pkimgplugin_container_bg").hide();if(e.hasClass("pkimgplugin_effect_transparent")){pkrss.q(".pkimgplugin_effect_transparent").removeClass("pkimgplugin_effect_transparent");pkrss.q(".pkimgplugin_effect_opacity").removeClass("pkimgplugin_effect_opacity")}}else{this.actived=true;pkrss.q("#pkimgplugin_container_bg").show();if(!e.hasClass("pkimgplugin_effect_transparent")){e.addClass("pkimgplugin_effect_transparent");pkrss.q(".pk_item_need_transparent").addClass("pkimgplugin_effect_transparent");pkrss.q(".box > p").addClass("pkimgplugin_effect_opacity")}}return false};pkrss.cls.rightpanel_picimg.prototype.initimgs=function(){var d=pkrss.ajax.pkurlresurlpath+"../";pkrss.q('<img src="'+d+'images/blank.png" id="pkimgplugin_container_bg" alt="" style="display:none;width:100%;height:100%;z-index:-1;"></img>').appendTo(pkrss.q("body"));var c=[{url:d+"images/bg/1.jpg",title:"1.jpg"},{url:d+"images/bg/2.jpg",title:"2.jpg"},{url:d+"images/bg/3.jpg",title:"3.jpg"},{url:d+"images/bg/4.jpg",title:"4.jpg"},{url:d+"images/bg/5.jpg",title:"5.jpg"},{url:d+"images/bg/6.jpg",title:"6.jpg"},{url:d+"images/bg/7.jpg",title:"7.jpg"}];for(var b in c){var a=c[b];this.addimgtocontainer(a.url,a.title)}};pkrss.cls.rightpanel_picimg.prototype.operInputFile=function(g){var d=null,h=null;if(!g.files){alert("SUPPORT( IE 10, CHROME, FIREFOX )");return}for(var f=0,j=g.files.length;f<j;++f){var e=g.files[f];if(e.getAsDataURL){d=e.getAsDataURL()}else{var a=null;if(window.createObjectURL){a=window.createObjectURL}else{if(window.createBlobURL){a=window.createBlobURL}else{if(window.URL&&window.URL.createObjectURL){a=window.URL.createObjectURL}else{if(window.webkitURL&&window.webkitURL.createObjectURL){a=window.webkitURL.createObjectURL}else{return}}}}d=a(e)}if(e.fileName){h=e.fileName}else{var b=d.lastIndexOf("/");if(b==-1){b=d.lastIndexOf("\\")}if(b!=-1){h=d.substring(b+1)}else{h=d}this.addimgtocontainer(d,h)}}if(h){pkrss.q("#btn_picimgplugin_item_"+h).trigger("click")}};pkrss.cls.rightpanel_picimg.prototype.addimgtocontainer=function(a,b){if(!b){b=""}pkrss.q("#tool_changebg_pane").append('<a href="#" onclick="return pkrss.modelview.rightpanel.picimg.onImgClick(this)" id="btn_picimgplugin_item_'+b+'" class="btn_picimgplugin_item btn_picimgplugin_itemevent"><img src="'+a+'" width="48" height="48" alt="'+b+'"/></a>')};pkrss.cls.rightpanel_picimg.prototype.initdatahandle=function(){pkrss.event.bind(pkrss.model.event.newsItemAppend,function(b){if(!this.actived){return}var a=b.pk.data;if(!a||!a.length){return}a.addClass("pkimgplugin_effect_transparent");a.children("p").addClass("pkimgplugin_effect_opacity")})};pkrss.cls.rightpanel_picimg.prototype.setup_fontresize_pane=function(){pkrss.q("#tool_changefontsize_pane_label").text(pkgetLocaleString("Font size")+":");pkrss.q("#tool_changefontsize_pane_addsize").prop("title",pkgetLocaleString("Larger"));pkrss.q("#tool_changefontsize_pane_decsize").prop("title",pkgetLocaleString("Smaller"));pkrss.q("#tool_changefontsize_pane_addsize").on("click",function(){pkrss.ui.increaseFont()});pkrss.q("#tool_changefontsize_pane_decsize").on("click",function(){pkrss.ui.decreaseFont()})};pkrss.define("pkrss.modelview.rightpanel",{picimg:new pkrss.cls.rightpanel_picimg()});