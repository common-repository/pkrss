pkrss.cls.newstype_newspaper_brief=function(){pkrss.cls.newstype_module_base.call(this);this.name="briefnews";this.text="Brief news";this.actived=false;this.model=null;this.container=null;this.containerid="briefdnews_info";this.oldparent=null};pkrss.cls.newstype_newspaper_brief.prototype.init=function(b,a){if(this.model){return}this.model=b;this.container=a;pkrss.utils.html.addCssContent("#briefnews_cotainer .rss_title {  font-weight: bold;  text-align: left;  text-overflow:ellipsis;  white-space:nowrap;}#briefnews_cotainer .rss_title a{	text-decoration:none;}.rss_briefbottom{  border-bottom: 1px solid rgba(69,54,37,0.2);  display: block;}.rss_briefbottom a{  text-decoration:none;}.rss_bottom,.rss_bottom a,.rss_briefbottom, .rss_briefbottom a{  clear: both;   color: rgba(69,54,37,0.6);  line-height: 1.5em;  height: 1.5em;}");pkrss.q("#plugin_container").append('<div id="'+this.containerid+'"><ol id="briefnews_cotainer"></ol></div>');pkrss.model.newstype.module.addmodule(this);pkrss.model.newstype.module.changemodule(this.name)};pkrss.cls.newstype_newspaper_brief.prototype.onActive=function(){this.actived=true;if(!this.model){return}var a=pkrss.q("#"+this.containerid);this.container.css("height","auto");if(!this.oldparent){this.oldparent=a.parent()}this.container.append(a);pkrss.ui.showLoading();this.loadrssitem(false);pkrss.event.bind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_brief.prototype.onDeactive=function(){this.actived=false;var a=pkrss.q("#"+this.containerid);this.oldparent.append(a);pkrss.q("#briefnews_cotainer").empty();pkrss.event.unbind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_brief.prototype.onCatalogTableChanged=function(){pkrss.model.newstype.newspaper.briefnews.loadrssitem(false)};pkrss.cls.newstype_newspaper_brief.prototype.loadrssitem=function(a){if(!this.actived){return}if(!a){pkrss.q("#briefnews_cotainer").empty()}var b=this;this.model.loadPageData(function(c){if(b.actived){b.onHandle(c)}b=null},!a)};pkrss.cls.newstype_newspaper_brief.prototype.onHandle=function(f){if(f&&f.length){var a="";for(var c in f){var e=f[c];var h=e.cid?e.cid:0;var g=e.tid?e.tid:0;a+="<li>";a+="<p class='rss_title'><a href='"+e.link+"' target='_blank' id='rss_desc_"+e.id+"'>"+e.title+"</a></p>";if(e.img&&e.img.length){for(imgindex in e.img){var b=e.img[imgindex];a+="<div style='width:"+b.width+"px;height:"+b.height+"px;float:left;;margin-right:12px;margin-bottom:12px;'><img src='"+b.url;a+="' width='"+b.width+"px' height='"+b.height+"px'";a+=" /></div>"}}a+="<p>"+pkrss.utils.html.strip_tags(e.description).replace("</","")+"</p> ";a+='<p class="rss_briefbottom">'+e.pubDate+" ";a+="<span class='text_oneline'>";if(e.catalogname){a+="<a href='#' onclick='return pkrss.modelview.catalog.changeRssTable("+h+",0);'>";a+="<img width='16px' height='16px' src='"+pkrss.ajax.pkurlsurlpath+"images/catalog/"+pkrss.model.catalog.getnavinfo(h).key+".png' alt='rss catalog logo' />";a+=e.catalogname;a+="</a>&nbsp-&nbsp"}var d="";if(e.tablename){d=e.tablename}else{if(e.src){d=e.src}else{d=e.author}}if(d&&(d!="")){a+="<a href='#' onclick='return pkrss.modelview.catalog.changeRssTable("+h+","+g+");'>";a+="<img width='16px' height='16px' src='"+e.link.substring(0,e.link.indexOf("/",9))+"/favicon.ico' alt='rss logo' />";if(e.tablename){a+=e.tablename}else{if(e.src){a+=e.src}else{a+=e.author}}a+="</a>"}a+="&nbsp;&nbsp;|";a+=" </span>";a+="</p>";a+="</li>"}if(f.aditems){a+=f.aditems.join("")}pkrss.q("#briefnews_cotainer").append(a)}else{}};pkrss.define("pkrss.model.newstype.newspaper",{briefnews:new pkrss.cls.newstype_newspaper_brief()});