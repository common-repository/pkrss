(function(){var a=window.Date,b=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,3})(?:Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/;if(a.parse("2011-11-29T15:52:30.5")!==1322581950500||a.parse("2011-11-29T15:52:30.52")!==1322581950520||a.parse("2011-11-29T15:52:18.867")!==1322581938867||a.parse("2011-11-29T15:52:18.867Z")!==1322581938867||a.parse("2011-11-29T15:52:18.867-03:30")!==1322594538867||a.parse("2011-11-29")!==1322524800000||a.parse("2011-11")!==1320105600000||a.parse("2011")!==1293840000000){a.__parse=a.parse;a.parse=function(d){var c=b.exec(d);if(c){return Date.UTC(c[1],(c[2]||1)-1,c[3]||1,c[4]-(c[8]?c[8]+c[9]:0)||0,c[5]-(c[8]?c[8]+c[10]:0)||0,c[6]||0,((c[7]||0)+"00").substr(0,3))}return a.__parse.apply(this,arguments)}}a.__fromString=a.fromString;a.fromString=function(c){if(!a.__fromString||b.test(c)){var d=a.parse(c);if(isNaN(d)){return null}return new a(d)}return a.__fromString.apply(this,arguments)}})();(function(){var x=false;var o=false;var e=false;var d=false;var c=false;var v=false;var a=false;var u=false;var k="";var n=false;var g=false;var q=document.location.href;var f=["://","//",":/"];for(var p in f){var h=q.indexOf(f[p]);if(h>=0){k=q.substring(0,h+f[p].length);break}}if(k.indexOf("http")===0){e=true;if(q.indexOf("192.168.")>=0||q.indexOf("localhost")>=0){n=true}}else{if(k.indexOf("ms-appx")===0){x=true;if(q.indexOf("ms-appx-web")===0){o=true}}else{if((k.indexOf("x-wmapp")===0)||(k.indexOf("x-wmpapp")===0)){if(q.toLowerCase().indexOf("/html")>=0){a=true}else{c=true}}else{if((k.indexOf("chrome-extension")===0)){u=true}else{if(q.indexOf("android")>=0){v=true}}}}}if(window._cordovaNative||v){d=true}if((typeof(console)=="undefined")||!console||!console.log){window.console={log:function(i){}}}function r(C,A,B,z){var D=-1;if(A){var y=A.length;B=B?(B<0?Math.max(0,y+B):B):0;for(;B<y;++B){if(z){if(true===z(C,A[B])){D=B;break}}else{if(C==A[B]){D=B;break}}}}return D}function t(z,A){if(A){for(var y in A){z[y]=A[y]}}return z}function s(A,B,z){t(A,B);if(z){for(var y=0,C=z.length;y<C;++y){t(A,z[y])}}return A}function w(B,E){if(!B){return null}var D=window,z=B.split(".");for(var C=0,y=z.length;C<y;C++){var A=z[C];if(!D[A]){if(!E){return null}D[A]={}}D=D[A]}return D}function b(y,i){if(x&&!o){return WinJS.Namespace.define(y,i)}var z=w(y,true);return t(z,i)}var m=1;function l(){return m++}return b("pkrss",{define:b,getObjFromNamespace:w,inArray:r,extend:t,extendMulti:s,uniqueid:l,plateform:{href:q,hrefSchema:k,isHttpClient:e,isMsAppx:x,isMsAppxWeb:o,isWP8:a,isWP7:c,isChromePlugin:u,isAndroid:v,isPhonegap:d},cls:{},fn:{},debug:n,hackdebug:g,tmp:{},rootSelector:(window.pkrss_oem_container||"body"),q:window.jQuery})})();(function(){var a={aptype:null,aptype_pkrss:1,aptype_pkmobile:2,aptype_pknews:3,aptype_pkradio:4,aptype_pkbook:5,aptype_pktts:6,aptype_pktools:7,aptype_pkmap:8,aptype_pkoutsource:9,aptype_pkstock2:10,aptype_newshare:11,aptype_pkexam:12,aptype_unknown:99,plateform:"w",plateform_webpage:"w",plateform_androidphone:"ap",plateform_iphone:"ip",plateform_winphone:"wp",plateform_blackberryphone:"bp",plateform_win8:"win8",plateform_wp8:"wp8",plateform_ie6:"ie6"};function b(){function e(f){a.aptype=f||a.aptype_unknown;a.plateform=a.plateform_webpage;if(pkrss.plateform.isMsAppx){a.plateform=a.plateform_win8}else{if(pkrss.plateform.isWP8){a.plateform=a.plateform_wp8}else{if(pkrss.plateform.isAndroid){a.plateform=a.plateform_androidphone}}}}function d(g){if(!g){g=a.plateform}var f="unknown";if(g==a.plateform_webpage){f="web page"}else{if(g==a.plateform_androidphone){f="android"}else{if(g==a.plateform_iphone){f="iphone"}else{if(g==a.plateform_winphone){f="windows phone"}else{if(g==a.plateform_blackberryphone){f="black berry phone"}else{if(g==a.plateform_win8){f="windows 8"}else{if(g==a.plateform_wp8){f="windows phone 8"}else{if(g==a.plateform_ie6){f="internet explorer 6"}}}}}}}}return f}function c(g){if(!g){g=a.aptype}var f="unknown";if(g==a.aptype_pkrss){f="pkrss"}else{if(g==a.aptype_pkmobile){f="pkmobile"}else{if(g==a.aptype_pknews){f="pknews"}else{if(g==a.aptype_pkradio){f="pkradio"}else{if(g==a.aptype_pkbook){f="pkbook"}}}}}return f}return{runtime:a,init:e,getPlateformName:d,getApType:c}}return pkrss.define("pkrss.plateform",new b())})();if(!pkrss.timer){pkrss.timer={}}pkrss.timer.interval=function(a,b,c){this.cb=c;this.timers=b;this.idx=0;this.working=false;this.i=null};pkrss.timer.interval.prototype.start=function(a){this.stop();var b=this;var c=a;this.i=setInterval(function(d){if(b.working){return}b.working=true;if((true===b.cb(d))||((b.timers!=-1)&&(b.idx>=b.timers))){b.stop();b=null;d=null;return}b.working=false;++b.idx},b.interval,c)};pkrss.timer.interval.prototype.stop=function(){if(this.i){this.cb=null;this.timers=null;this.idx=null;clearInterval(this.i);this.i=null;this.working=null}};pkrss.timer.interval2=function(e,b,g,d){var k=false;var l=0;var c=e;var a=b;var m=g;var h=d;var f=window.setInterval(function(){k=m();if(k!==true){if((a==-1)||(++l<a)){return}l=null}window.clearInterval(f);f=null;h(k);c=null;a=null;h=null;k=null},c)};function eventClient(){this.evtmap={}}eventClient.prototype.bind=function(b,a){if(!this.evtmap[b]){this.evtmap[b]=[a]}else{if(pkrss.inArray(a,this.evtmap[b])<0){this.evtmap[b].push(a)}}};eventClient.prototype.unbind=function(b,a){if(!this.evtmap[b]){return}var c=pkrss.inArray(a,this.evtmap[b]);if(c>=0){this.evtmap[b].splice(c,1)}};eventClient.prototype.trigger=function(c,d){if(!this.evtmap[c]){return}var b=this.evtmap[c];for(var a in b){b[a](d)}};pkrss.define("pkrss",{event:new eventClient()});(function(){function a(){function c(){return navigator.onLine}function b(){var d="unknown";if(navigator.network&&navigator.network.connection&&navigator.network.connection.type&&(typeof(Windows)!="Connection")){if(navigator.network.connection.type==Connection.CELL_2G){d="2g"}else{if(navigator.network.connection.type==Connection.CELL_3G){d="3g"}else{if(navigator.network.connection.type==Connection.CELL_4G){d="4g"}else{if(navigator.network.connection.type==Connection.WIFI){d="wifi"}else{if(navigator.network.connection.type==Connection.ETHERNET){d="ethernet"}else{if(navigator.network.connection.type==Connection.NONE){d="none"}}}}}}}return d}return{isOnline:c,networkConnectionType:b}}pkrss.define("pkrss",{net:new a()})})();if(!window.pkgetLocaleString){window.pkgetLocaleString=function(a){return a};pkrss.t=window.pkgetLocaleString}pkrss.fn.getObjText=function(b,a){var c=b.data(a);if(!c){if(b.is("span")&&b.parent().hasClass("ui-btn-text")&&b.parent().parent().parent().parent().hasClass("ui-select")){c=b.parent().parent().siblings("select").children("option[selected=selected]").data(a)}}return c};pkrss.cls.pkTranslate=function(a){this.prepareList=[];this.prepareInterval=null;this.options=pkrss.q.extend({service:"bing"},a)};pkrss.cls.pkTranslate.prototype.translate=function(d,c,b,a){pkrss.ajax.getTranslateData({from:b,to:c,message:escape(d),task:"translate",all:(d==1?1:0),service:this.options.service,ap:pkrss.plateform.runtime.aptype},a,a)};pkrss.cls.pkTranslate.prototype.prepare=function(e,g,f,a){if(!e||!g||!f||(g==f)){if(a){a(null)}return}var d;for(var c in this.prepareList){d=this.prepareList[c];if((d.message==e)&&(d.to==g)&&(d.from==f)){if(a){a(null)}return}}this.prepareList.push({message:e,to:g,from:f,cb:a});if(this.prepareInterval){if(a){a(null)}return}var b=this;this.prepareInterval=new pkrss.timer.interval2(500,2,function(){var k;for(var h in b.prepareList){k=b.prepareList[h];b.translate(k.message,k.to,k.from,k.cb)}b.empty();return false},function(h){b.prepareInterval=null;b=null})};pkrss.cls.pkTranslate.prototype.empty=function(){this.prepareList=[]};pkrss.cls.languageClient=function(){this.options={currentUILanguage:"en",onLanguageChanged:null,clsOnline:pkrss.cls.pkTranslate,loadfun:this._loadfun,savefun:this._savefun,selector:".pkAutoTranslactor",datakey:"pkorigstr"};this.data={};this.prepareList=[]};pkrss.cls.languageClient.prototype._loadfun=function(a){if(pkrss.utils&&pkrss.utils.db){return pkrss.utils.db.loadbindata(a)}return null};pkrss.cls.languageClient.prototype._savefun=function(a,b){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savebindata(a,b)}};pkrss.cls.languageClient.prototype.start=function(c,a){console.log("pkrss.cls.languageClient.prototype.start");this.options=pkrss.q.extend(this.options,c);if(!this.languageOnline){this.languageOnline=new this.options.clsOnline()}var b=this;if(b._startcbok){if(a){a()}return}window.pkgetLocaleString=pkrss.t=this.getLocaleString;var d=this.options.currentUILanguage;this.options.currentUILanguage="en";this.clearAndRefreshUITextByLanguage(d,function(){b._startcbok=true;if(a){a()}})};pkrss.cls.languageClient.prototype.getLocaleFromLanguage=function(g){if(!g){return null}g=g.toLowerCase();g=g.replace("-","_");var b="en";if(g=="el"){b="el_GR"}else{if(g.indexOf("zh_hant")>=0){b="zh_TW"}else{if((g.indexOf("zh_")>=0)&&(g.indexOf("_hk")>=0)){b="zh_HK"}else{var f=g.indexOf("_");if(f>=0){g=g.substring(0,f)}var a=["af","bg","ca","cs","da","de","el_GR","en","en_GB","es","fa","fi","fr","fr_CA","gr","he","hr","hu","id","it","ja","ko","lt","lv","mk","nl","no_NB","no_NN","pl","pt_BR","pt_PT","ro","ru","sk","sl","sr","sr_RS","sv_SE","th","tr","ukr","vn","zh_CN","zh_HK","zh_TW"];var d;var e=false;for(var c in a){d=a[c].toLowerCase();if(d==g){b=a[c];e=true;break}}if(!e){for(var c in a){d=a[c].toLowerCase();f=d.indexOf("_");if(f>=0){d=d.substring(0,f)}if(d==g){b=a[c];break}}}}}}return b};pkrss.cls.languageClient.prototype.setUILanguage=function(c,a){do{console.log("pkrss.cls.languageClient.prototype.setUILanguage:"+c);var b=this.getLocaleFromLanguage(c);if(!b){console.log("pkrss.cls.languageClient.setUILanguage error:"+c);break}this.saveCurrentLanguageDataToDb();this.clearAndRefreshUITextByLanguage(b,a);a=null}while(false);if(a){a()}};pkrss.cls.languageClient.prototype.clearAndRefreshUITextByLanguage=function(d,a){var c=this.options.currentUILanguage;if(c==d){console.log("pkrss.cls.languageClient.clearAndRefreshUITextByLanguage same confit:"+d);if(a){a()}return}this.options.currentUILanguage=d;this.data=this.options.loadfun?this.options.loadfun("pkrss_translate_"+d):{};if(!this.data){this.data={}}if(this.languageOnline){this.languageOnline.empty()}this.prepareList=[];if(!this.data["1"]){var b=this;this.languageOnline.prepare("1",d,"en",function(e){b.setMessageResult(e,true);if(a){a()}b.refreshUITextByLanguage();b=null})}else{this.refreshUITextByLanguage();if(a){a()}}if(this.options.onLanguageChanged){this.options.onLanguageChanged(this.options.currentUILanguage,c)}};pkrss.cls.languageClient.prototype.refreshUITextByLanguage=function(){var a=this;pkrss.q(a.options.selector).each(function(){var c=pkrss.q(this);var b=pkrss.fn.getObjText(c,a.options.datakey),d;if(!b){return}if(b[b.length-1]==":"){d=b.substring(0,b.length-1);d=a.findLocaleString(d)+":"}else{d=a.findLocaleString(b)}if(!d||(d==c.text())){return}if(pkrss.ui&&pkrss.ui.setUIControlText){pkrss.ui.setUIControlText(c,d)}else{c.text(d)}})};pkrss.cls.languageClient.prototype.setMessageResult=function(a,c){if(!a||(a.code!=0)||(this.options.currentUILanguage!=a.to)){return}a.message=unescape(a.message);a.message2=unescape(a.message2);this.data[a.message]=a.message2;if(c&&a.allmessage){for(var b in a.allmessage){this.data[unescape(b)]=unescape(a.allmessage[b])}}};pkrss.cls.languageClient.prototype.findLocaleString=function(c){var b;var a="en";if(this.data&&c&&(this.options.currentUILanguage!=a)){c=unescape(c);b=this.data[c];if(!b&&this.languageOnline&&pkrss.inArray(c,this.prepareList)<0){this.prepareList.push(c);this.languageOnline.prepare(c,this.options.currentUILanguage,a,function(d){if(!d){return}var e=pkrss.utils.language;e.setMessageResult(d,false);if(!e._setUILanguage_timeout){e._setUILanguage_timeout=true;setTimeout(function(){e.saveCurrentLanguageDataToDb();e.refreshUITextByLanguage()},2000)}})}}return b||c};pkrss.cls.languageClient.prototype.saveCurrentLanguageDataToDb=function(){var a=this;if(!a._setUILanguage_timeout){return}if(a.options.savefun){a.options.savefun("pkrss_translate_"+a.options.currentUILanguage,a.data)}a._setUILanguage_timeout=null};pkrss.cls.languageClient.prototype.getLocaleString=function(b){var a=pkrss.utils.language.findLocaleString(b);return a?a:b};pkrss.define("pkrss.utils",{language:new pkrss.cls.languageClient()});pkrss.cls.html=function(){this.loadedFileList=[]};pkrss.cls.html.prototype.replaceHtmlEntites=function(b){if(!b){return b}var a=/&(nbsp|amp|quot|lt|gt);/g;var c={nbsp:" ",amp:"&",quot:'"',lt:"<",gt:">"};return pkrss.utils.html.strip_tags(b).replace(a,function(e,d){return c[d]})};pkrss.cls.html.prototype.replaceHtmlTags=function(b,c){if(!b){return b}var a,d;if(!c){a=/(<|>)/g;d={"<":"&lt",">":"&gt"}}else{a=/(\'|\"|<|>)/g;d={"'":"'",'"':'\\"',"<":"&lt",">":"&gt"}}return pkrss.utils.html.strip_tags(b).replace(a,function(f,e){return d[e]})};pkrss.cls.html.prototype.hashCode=function(d){var c=0;if(d.length==0){return c}var a=d.length;for(var b=0;b<a;++b){c=((c<<5)-c)+d.charCodeAt(b);c=c&c}return c};pkrss.cls.html.prototype.strip_tags=function(html){if(arguments.length<3){html=html.replace(/<\/?(?!\!)[^>]*>/gi,"")}else{var allowed=arguments[1];var specified=eval("["+arguments[2]+"]");if(allowed){var regex="</?(?!("+specified.join("|")+"))\b[^>]*>";html=html.replace(new RegExp(regex,"gi"),"")}else{var regex="</?("+specified.join("|")+")\b[^>]*>";html=html.replace(new RegExp(regex,"gi"),"")}}var clean_string=html;return clean_string};pkrss.cls.html.prototype.currentPlateformString=function(){var a=" ";var b=pkrss.plateform.runtime;if(b.plateform==b.plateform_webpage){a+=pkgetLocaleString("WebPage")}else{if(b.plateform==b.plateform_androidphone){a+=pkgetLocaleString("Android")+" "+pkgetLocaleString("Client")}else{if(b.plateform==b.plateform_iphone){a+=pkgetLocaleString("IPhone")+" "+pkgetLocaleString("Client")}else{if(b.plateform==b.plateform_winphone){a+=pkgetLocaleString("Windows Phone")+" "+pkgetLocaleString("Client")}else{if(b.plateform==b.plateform_blackberryphone){a+="BlackBerry "+pkgetLocaleString("Client")}else{a+=pkgetLocaleString("Unknwon")}}}}}return a};pkrss.cls.html.prototype.getHost=function(a){var c=a.indexOf("://");if(c>=0){var b=a.indexOf("/",c+3);if(b==-1){return a.substring(c+3)}else{return a.substring(c+3,b)}}return""};pkrss.cls.html.prototype.downloadImage=function(b,a){if(!a||!b){return}var c=new XMLHttpRequest();c.open("GET",b,true);c.responseType="blob";c.addEventListener("load",function(){if(c.status===200){a(c.response)}},false);c.send()};pkrss.cls.html.prototype.addJavascriptFile=function(e,b){var d=document.getElementsByTagName("script");for(var c=0,a=d.length;c<a;c++){if(d[c].src.indexOf(e)>=0){if(b){b()}return this}}pkrss.q.getScript(e,b);return this};pkrss.cls.html.prototype.addJavascriptFileOrig2=function(d,b){console.log("pkrss addJavascriptFileOrig:"+d);var c=document.createElement("script");c.type="text/javascript";c.charset="UTF-8";if(b){c.async=true}c.src=d;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);return this};pkrss.cls.html.prototype.addJavascriptFileOrig=function(c,b){if(pkrss.q.isArray(c)){for(var a in c){this.addJavascriptFileOrig2(c[a],b)}return this}return this.addJavascriptFileOrig2(c,b)};pkrss.cls.html.prototype.addIframeJs=function(c,d){var b=c,a=d;b.onload=function(){b.contentWindow.postMessage("pkrss js:"+a,"*")}};pkrss.cls.html.prototype.addCssFile=function(f,d){var c=document.getElementsByTagName("link");for(var b=0,a=c.length;b<a;b++){if(c[b].href==f){return this}}if(d==null){d=true}var e=document.createElement("link");e.type="text/css";e.async=d;e.href=f;e.rel="stylesheet";e.media="screen";c=c[0];c.parentNode.insertBefore(e,c);return this};pkrss.cls.html.prototype.addCssContent=function(){var g,c;if(arguments.length==1){g=document;c=arguments[0]}else{if(arguments.length>2){g=arguments[0];c=arguments[1]}else{return}}var e=g.getElementsByTagName("head")[0];var b=e.getElementsByTagName("style");if(b.length==0){if(g.createStyleSheet){g.createStyleSheet()}else{var d=g.createElement("style");d.setAttribute("type","text/css");e.appendChild(d)}}var a=b[0];var f=a.getAttribute("media");if(f!=null&&!/screen/.test(f.toLowerCase())){a.setAttribute("media","screen")}if(a.styleSheet){a.styleSheet.cssText+=c}else{if(g.getBoxObjectFor){a.innerHTML+=c}else{a.appendChild(g.createTextNode(c))}}};pkrss.cls.html.prototype.loadHtmFile=function(d,f,e,b){for(var c=0,a=this.loadedFileList.length;c<a;c++){if(this.loadedFileList[c]==f){b();return this}}this.loadedFileList.push(f);d.load(f,e,b);return this};pkrss.cls.html.prototype.loadHtmPlugin=function(c){if(pkrss.utils.ajax.localFileMode){c="plugin/"+c}else{if(c.indexOf("/")<0){c="/s/plugin/"+c}}for(var b=0,a=this.loadedFileList.length;b<a;b++){if(this.loadedFileList[b]==c){return this}}this.loadedFileList.push(c);var d="plugin_item_"+this.loadedFileList.length;pkrss.q("#plugin_container").append("<div id='"+d+"'></div>");pkrss.q("#"+d).load(c);return this};pkrss.cls.html.prototype.loadJsPlugin=function(d,c){console.log("pkrsslib.loadJsPlugin("+d+","+c+")");d=pkrss.ajax.pkurlresurlpath+"js/plugin/"+d;if(!c){for(var b=0,a=this.loadedFileList.length;b<a;b++){if(this.loadedFileList[b]==d){return this}}this.loadedFileList.push(d)}console.log(d);this.addJavascriptFileOrig(d,true);return this};pkrss.cls.html.prototype.requestParam=function(c){var b=location.href;if(b.indexOf("#")>0){b=b.substring(0,b.indexOf("#"))}var e=b.substring(b.indexOf("?")+1,b.length).split("&");var a={};for(var d=0;j=e[d];d++){a[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length)}var f=a[c.toLowerCase()];if(typeof(f)=="undefined"){return""}else{return f}};pkrss.cls.html.prototype.loadPlateformJs=function(b,a){this.loadPlateformJs2(0,b,a)};pkrss.cls.html.prototype.loadPlateformJs2=function(b,g,a){if(!g||(b>=g.length)){if(a){a(true)}return}var e=g[b];var f=0;var c=false;var d=this;new pkrss.timer.interval2(200,30,function(){var h=true;if(e.depends){while(f<e.depends.length){++f;if(!pkrss.getObjFromNamespace(e.depends[f])){h=false;break}}}if(h&&!c){c=true;if(!pkrss.getObjFromNamespace(e.ns)){d.addJavascriptFileOrig(e.src,true)}}if(h){h=(pkrss.getObjFromNamespace(e.ns)!=null)}return h},function(h){if(!h){if(pkrss.debug){throw"error js:"+e.src}console.log("pkrss error load js:"+e.src)}d.loadPlateformJs2(b+1,g,a)})};pkrss.cls.html.prototype.downloadUrl=function(a){if(!this.downloadHelperWidget){this.downloadHelperWidget=pkrss.q("#hide-page-container").append('<a href="" target="_BLANK" downloaded="downloaded"></a>')}this.downloadHelperWidget.prop("href",a).trigger("click")};pkrss.cls.html.prototype.fixedImageSrc=function(b,a){do{var c=b.indexOf("://");if(c>=0){break}c=b.indexOf("//");if(c==0){break}c=b.indexOf("/");if(c==0){b=this.getHost(a)+b;break}c=b.indexOf("./");if(c==0){b=b.substring(2)}c=a.lastIndexOf("/");a=a.substring(0,c+1);b=a+b}while(false);return b};pkrss.cls.html.prototype.fixedContainerHtmlSrc=function(c,b){if(!c||!b){return}var a=this;return c.replace(/src=\"([^\"]*)\"/gi,function(d,e){return'src="'+a.fixedImageSrc(e,b)+'"'})};pkrss.cls.html.prototype.openUrl=function(b){var a=this.aobj||document.createElement("a");if(!this.aobj){this.aobj=a}a.target="_blank";a.href=b;a.click();return};pkrss.cls.html.prototype.getFavicon=function(a){if(!a){return a}var b=a.indexOf("/",9);if(b>=0){a=a.substring(0,b)}a+="/favicon.ico";return a};pkrss.define("pkrss.utils",{html:new pkrss.cls.html()});(function(){function a(){var x,s,c;var k,w;var u=false;var z=false;function o(A,B){k=A;w=B;if(pkrss.indexDb){s=pkrss.indexDb;s.init([{dbTable:w,dbIndexKey:"name",dbIndexKeyAutoIncrement:false}],{dbCreatedCb:function(D){u=D}})}else{if((typeof(window.openDatabase)!="undefined")&&window.openDatabase){try{x=window.openDatabase(k,"1.0","pkrss s db",2*1024*1024)}catch(C){x=null}if(x){x.transaction(function(D){D.executeSql("CREATE TABLE IF NOT EXISTS "+w+"(name TEXT PRIMARY KEY  NOT NULL,content TEXT)",[])},function(D){},function(){u=true})}}else{if(pkrss.q&&pkrss.q.indexedDB){pkrss.q.indexedDB(k,{schema:{"1":function(D){D.createObjectStore(w,{keyPath:"name",autoIncrement:false})}}}).done(function(){c=pkrss.q.indexedDB(k).objectStore(w)})}}}}function q(B){if((typeof(JSON)=="undefined")||!JSON||!JSON.parse||!B||B==""||B=="undefined"){return null}if(typeof(B)!="string"){return B}try{return JSON.parse(B)}catch(A){}return null}function g(A){if((typeof(JSON)=="undefined")||!JSON||!JSON.stringify||!A||(typeof(A)=="string")){return A}return JSON.stringify(A)}function t(){return(z==false)}function n(A){z=A}function r(B){if(!t()){return null}var A="pkrss_"+B;return q(b(A))}function m(B){if(!t()){return null}var A="pkrss_"+B;return q(h(A))}function b(A){if(!t()){return null}var B=null;if(window.localStorage){try{B=window.localStorage.getItem(A);B=q(B)}catch(C){}}return B}function l(C,A){if(!A){return}if(!t()){A(null);return}var B=false;if(s){s.getMapDataByKey(w,C,function(D){if(D){D=D.content}A(D)})}else{if(x&&u){x.transaction(function(D){D.executeSql("SELECT content FROM "+w+" WHERE name = ?",[C],function(E,F){var G;var I;if(F.rows.length>0){try{I=F.rows.item(0).content;G=q(I)}catch(H){}}A(G)},function(E,F){A(null)})});B=true}else{if(c){c.get(C).then(function(D){A(D)},function(D,E){A(null)});B=true}else{A(null)}}}return B}function v(C,D,A){if(!A){return}if(!t()){A(null);return}var B=false;if(s){s.getMapRangeDataByKey(w,C,D,function(E){var G;if(E){G=[];for(var F in E){G.push(E[F].content)}}A(G)})}else{if(x&&u){x.transaction(function(E){E.executeSql("SELECT content FROM "+w+" WHERE name >= ? AND name <= ?",[C,D],function(F,G){var I;var J;for(var H=0,K=G.rows.length;H<K;++H){if(!I){I=[]}J=G.rows.item(H).content;I.push(q(J))}A(I)},function(F,G){A(null)})});B=true}else{A(null)}}return B}function h(A){if(!t()){return null}var B=null;if(window.sessionStorage){B=window.sessionStorage.getItem(A)}return B}function f(B,C){if(!t()){return}var A="pkrss_"+B;e(A,g(C))}function y(B,C){if(!t()){return}var A="pkrss_"+B;i(A,g(C))}function e(A,B){if(!t()){return}if(window.localStorage){try{window.localStorage.setItem(A,g(B))}catch(C){}}}function p(A,B){if(!t()){return}if(s){s.modifyItem(w,{name:A,content:B})}else{if(x&&u){x.transaction(function(C){C.executeSql("INSERT OR IGNORE INTO "+w+"(name,content) VALUES(?,null)",[A],function(){C.executeSql("UPDATE "+w+" SET content=? WHERE name=?",[g(B),A]);B=null;A=null},function(E,F){var D=0})})}else{if(c){c.add(B,A).then(function(C){console.log(C)},function(C){console.log(C)});ret=true}}}}function i(A,B){if(!t()){return}if(window.sessionStorage){window.sessionStorage.setItem(A,B)}}function d(){return u}return{init:o,objFromString:q,canSave:t,loaddata:r,loadsessiondata:m,loadbindata:b,loaddbdata:l,loaddbrangedata:v,loadsessionbindata:h,savedata:f,savesessiondata:y,savebindata:e,savedbdata:p,savesessionbindata:i,isDbCreated:d,setCleanMode:n}}pkrss.define("pkrss.utils",{db:new a()})})();pkrss.cls.ui=function(){this.originalFontSize=null;this.inited=false;this._loadimpromptued=false};pkrss.cls.ui.prototype.init=function(){if(this.inited){return}this.inited=true;this.originalFontSize=pkrss.q("html").css("font-size")};pkrss.cls.ui.prototype.resetFont=function(){if(!this.inited){return}pkrss.q("html").css("font-size",this.originalFontSize)};pkrss.cls.ui.prototype.increaseFont=function(){if(!this.inited){this.init()}var b=pkrss.q("html").css("font-size");var c=parseFloat(b);var a=c*1.1;pkrss.q("html").css("font-size",a)};pkrss.cls.ui.prototype.decreaseFont=function(){if(!this.inited){this.init()}var b=pkrss.q("html").css("font-size");var c=parseFloat(b);var a=c*0.9;pkrss.q("html").css("font-size",a)};pkrss.cls.ui.prototype.saveas=function(a){setTimeout(function(){var c="saveasiframeobj_objhelper";var b=document.getElementById(c);if(!b){b=document.createElement("a");b.target="_blank";b.id=c;b.style.display="none";b.download="";b.href="";document.body.appendChild(b)}b.href=a;b.click()},0)};pkrss.cls.ui.prototype.msgbox=function(c,b){if((typeof(Windows)!="undefined")&&(typeof(Windows.UI)!="undefined")&&(typeof(Windows.UI.Popups)!="undefined")){var c=new Windows.UI.Popups.MessageDialog(c);c.showAsync().done(function(){});return}if(!b){b=5000}var a=pkrss.q("#_pk_msgbox_message");if(!a.length){pkrss.q("body").append('<div style="display:none;position: absolute; left: 40%; top: 40%;z-index:999;background-color: #3F3933;padding: 20px;"><span id="_pk_msgbox_message" style="color: #F38F2A;font-weight: bold;text-shadow: black 0px 0px 0px;"></span></div>');a=pkrss.q("#_pk_msgbox_message")}else{}a.parent().show("slow");a.html(c);setTimeout(function(){pkrss.q("#_pk_msgbox_message").parent().hide("slow")},b)};pkrss.cls.ui.prototype.confirm=function(f,e,a,h){if((typeof(Windows)!="undefined")&&(typeof(Windows.UI)!="undefined")&&(typeof(Windows.UI.Popups)!="undefined")){var e=new Windows.UI.Popups.MessageDialog(e,f);var d;for(var b=0,g=a.length;b<g;++b){d=a[b];e.commands.append(new Windows.UI.Popups.UICommand(d.title,d.cb))}if(!h){h=1}e.defaultCommandIndex=h;e.showAsync()}else{window.confirm(f,e)}};pkrss.cls.ui.prototype._loadimpromptu=function(a){if(this._loadimpromptued){if(a){a()}return}this._loadimpromptued=true;pkrss.utils.html.addCssFile(pkrss.ajax.pkurlresurlpath+"css/third/jquery-impromptu/jquery-impromptu.css");pkrss.utils.html.addJavascriptFileOrig(pkrss.ajax.pkurlresurlpath+"js/third/jquery-impromptu/jquery-impromptu.js");pkrss.timer.interval2(300,30,function(){return(typeof(pkrss.q.prompt)!="undefined")?true:false},function(b){if(!b){return}a()})};pkrss.cls.ui.prototype.inputText=function(a,d,c,b){if(!d){d=""}if(!c){c=""}if(!b){b=""}this._loadimpromptu(function(){var e={state0:{title:pkgetLocaleString("Input message")+" - "+b,html:'<input type="textarea" name="msg" value="'+c+'" placeholder="'+d+'" x-webkit-speech>',buttons:{OK:1},focus:1,submit:function(k,h,g,i){var l=i.msg;if(!l){l=""}k.preventDefault();pkrss.q.prompt.close();if(a){a(l)}}}};pkrss.q.prompt(e,{top:"40%",zIndex:1999})})};pkrss.cls.ui.prototype.centerShow=function(b,a){var d=b.parent();var g=a.clientX,e=a.clientY,i=b.width(),c=b.height(),f=d.width(),k=d.height();if(f<g+i){g=(f-i)/2}if(k<e+c){e=(k-c)/2}b.css({top:e+"px",left:g+"px"});b.show()};pkrss.cls.ui.prototype.centerHorzShow=function(c,a){c=pkrss.q(c);var b=(c.parent().width());b=(b%a)/2-20;c.css("margin-left",b+"px")};pkrss.cls.ui.prototype.showLoading=function(b,c,e,f,a){var d=pkrss.q("#loadmoreajaxloader");if(d.length){d.show();return}};pkrss.cls.ui.prototype.hideLoading=function(){var a=pkrss.q("#loadmoreajaxloader");if(a.length){a.hide();return}};pkrss.define("pkrss",{ui:new pkrss.cls.ui()});(function(){function a(){var f="cdn.pkrss.com";var o="b.pkrss.com";var m="http://"+f;var B="";var s="http://"+o;var D="";var h="";var y="";var C="";var x="";var i="";var G=false;var g=false;var H=false;var n=pkrss.plateform.href;if(!pkrss.plateform.isHttpClient){if(pkrss.hackdebug){m="http://192.168.217.1";s=m}B=m;G=true}if(G||n.indexOf("192.168.")>=0||n.indexOf("localhost")>=0){g=true}else{m=pkrss.plateform.hrefSchema+f;B=pkrss.plateform.hrefSchema+"wincdn.pkrss.com"}if(G){if((typeof(WinJS)!="undefined")&&WinJS&&WinJS.xhr){D="/"}else{if(!pkrss.plateform.isHttpClient){D="../../../"}else{D="./"}}if(pkrss.plateform.isHttpClient){h=D}else{h="../../"}}else{if(window.pk_oem_basesrc){h=window.pk_oem_basesrc}else{if(n.indexOf("192.168.")>=0||n.indexOf("localhost")>=0){m="";s=""}D=m+"/s/";h=D+(g?"ful":"min")+"/"}}if(!G||pkrss.plateform.isMsAppxWeb||pkrss.hackdebug){i=m+"/s/tool/proxy/index.php?timeout=5&";if(pkrss.hackdebug){i+="hackdebug=1&"}i+="url="}C=D+"cache/mw/";x=B+"/s/cache/mw/";y=m+"/s/cache/mw/";pkrss_feedajaxurl=s+"/p/m/rssajax/get/";pkrss_translateajaxurl=s+"/p/m/translate/get/";var p={};var v=0;function A(K,J){var I=p[J];if(!I){console.log("ajaxJSCb not valid:"+J);return}p[J]=null;I(K)}function z(I){if(H){if(I.indexOf("://")>=0){return false}}return true}function w(N,P,I,M,L){if(!z(N)){if(I){I(null)}return}var K="";for(var J in P){if(K!=""){K+="&"}K+=J+"="+P[J]}if((typeof(WinJS)!="undefined")&&WinJS&&WinJS.xhr){N+=K+".json";e(N,{},I,M)}else{var O;if(K){O="i"+pkrss.utils.html.hashCode(K);p[O]=I;K+="&pkjscb=pkrss.ajax.ajaxJSCb&pkjscbid="+O;K+=".js"}N+=K;pkrss.utils.html.addJavascriptFileOrig(N)}}function u(M,N,I,L){var K="";for(var J in N){if(K!=""){K+="&"}K+=J+"="+N[J]}M+=K+".js";w(M,[],I,L)}function t(L,I,K,J){if(J=="json"){w(C,L,I,K)}else{u(C,L,I,K)}}function q(L,I,K,J){if(pkrss.plateform.isChromePlugin){e(y,L,I,K,"GET",J)}else{w(y,L,I,K,J)}}function E(K,I,J,L){e(pkrss_feedajaxurl,K,I,J,L)}function c(L,I,K,J){q(L,I,K,J)}function r(K,I,J,L){e(B+"/ttsservice/ajax/tts.ashx",K,I,J,L)}function k(){pkrss.ui.msgbox("unknown error!")}function e(L,M,I,K,N,J){if(!z(L)){if(I){I(null)}return}if(!N){N="POST";if(L.indexOf("://")<0){N="GET"}}if(!J){J="json"}console.log("pkrss ajax2:"+L);return jQuery.ajax({type:N,url:L,data:M,success:I,error:K,dataType:J})}function l(J,I){if(G&&pkrss.profile.usersetting.auth&&pkrss.profile.usersetting.auth.ocrossauthid){J=pkrss.q.extend(J,{crossauthid:pkrss.profile.usersetting.auth.ocrossauthid})}e(pkrss_feedajaxurl,J,I)}function b(I){if(G&&pkrss.profile.usersetting.auth&&pkrss.profile.usersetting.auth.ocrossauthid){if(I.indexOf("?")>=0){I+="&"}else{I+="?"}I+="crossauthid="+pkrss.profile.usersetting.auth.ocrossauthid}return I}function d(M,O,I,L,P,K){if(!pkrss.hackdebug&&pkrss.plateform.isMsAppxWeb){pkrss.message.post("net",{action:"ajax",data:{url:M,data:O,type:P,responseType:K}},function(R){var Q=null;if(R&&R.response){Q=R.response}I(Q)});return}if(i!=""){M=i+encodeURIComponent(M);M+="&cachecontrol=no";if(O){var N="";for(var J in O){if(N!=""){N+="&"}N+=J+"="+encodeURIComponent(O[J])}O={url2:N}}}e(M,O,I,L,P,K)}function F(I,J){if(i!=""){I=i+encodeURIComponent(I);if(J){I+="&cachecontrol="+J}}return I}return{localFileMode:G,makeDirectUrl:F,pkurlprefix:m,pkwinurlprefix:B,pkurlorigin:s,pkurlsurlpath:D,pkurlresurlpath:h,pkrss_feedurl:y,pkrss_cacheurl:C,pkrss_winfeedurl:x,pkrss_proxyfeedurl:i,ajaxJSCb:A,canAjax:z,ajax:w,ajaxJS:u,getPkLocal:t,getPkCache:q,getPkData:E,getTranslateData:c,getAshxData:r,ajax2:e,ajaxsession:l,appendsessionurl:b,ajaxProxy:d}}pkrss.define("pkrss",{ajax:new a()})})();function profileClient(){this.defaultsetting={locale:null,uilang:null,cleanMode:false,selectedLId:1,selectedCId:11,selectedTId:277,selectedIId:0,settingNetworkCacheSupport:true,networkTimeoutSecond:10};this.usersetting=this.db=this.tablename=null}profileClient.prototype.init=function(c,d,b){this.defaultsetting=pkrss.extend(this.defaultsetting,c);if(!b){b="pkusersetting"}this.tablename=b;if(pkrss.plateform){pkrss.plateform.init(d)}var a=this.db=pkrss.utils.db;if(a){a.init(d,b);this.usersetting=a.loaddata(b)}if(!this.usersetting){this.reset()}};profileClient.prototype.check=function(){var b=this.usersetting;if(!b.uilang||(b.uilang=="")){var a;if(navigator.browserLanguage){a=navigator.browserLanguage}else{if(navigator.userLanguage){a=navigator.userLanguage}else{if(navigator.systemLanguage){a=navigator.systemLanguage}else{if(navigator.language){a=navigator.language;if(window._cordovaNative&&navigator.globalization&&navigator.globalization.getLocaleName){navigator.globalization.getLocaleName(function(c){a=c.value;pkrss.utils.language.setUILanguage(c.value)},function(){})}}}}}if(!a){a="en"}b.uilang=a}if(pkrss.utils&&pkrss.utils.language){b.uilang=pkrss.utils.language.getLocaleFromLanguage(b.uilang)||"en"}if(!b.locale){b.locale="en"}b.locale=b.uilang};profileClient.prototype.reset=function(a){this.usersetting=pkrss.extend({},this.defaultsetting);this.check();if(a){this.saveUserData()}};profileClient.prototype.saveUserData=function(){if(this.db&&!this.usersetting.cleanMode){this.db.savedata(this.tablename,this.usersetting)}};profileClient.prototype.canSave=function(){var a=true;if(!this.db||(this.usersetting&&this.usersetting.cleanMode)){a=false}return a};pkrss.define("pkrss",{profile:new profileClient()});function rssClient(){}rssClient.prototype.queryserverlocale=function(b,e,a,d){var c=e?pkrss.ajax.getPkCache:pkrss.ajax.getPkLocal;c({task:"locale",locale:b,catalog:true,table:true,all:true},function(f){if(a){a(f)}},function(){if(d){d()}},"json")};rssClient.prototype.queryserverenav=function(b,a){pkrss.ajax.getPkCache({lid:b,table:true,task:"catalog2"},function(c){if(a){a(c)}})};rssClient.prototype.queryserveretab=function(b,a){pkrss.ajax.getPkCache({task:"table",catalogid:b},function(c){if(a){a(c)}})};rssClient.prototype.queryserverenewstab=function(b,a){pkrss.ajax.getPkCache({task:"tablenews",catalogid:b},function(c){if(a){a(c)}})};rssClient.prototype.importSysCatToUserCat=function(b,a){pkrss.ajax.ajaxsession({task:"rsscatuseraddsys",idarray:b},function(c){if(a){a(c)}})};rssClient.prototype.addusercatitem=function(b,a){pkrss.ajax.ajaxsession({task:"rsscatuseradditem",text:b},function(c){if(a){a(c)}})};rssClient.prototype.delusercat=function(b,a){pkrss.ajax.ajaxsession({task:"rsscatuserdelitem",idarray:b},function(c){if(a){a(c)}})};rssClient.prototype.userinfo=function(a){pkrss.ajax.ajaxsession({task:"userinfo"},function(b){if(a){a(b)}})};rssClient.prototype.addsyscat=function(c,b,a){pkrss.ajax.ajaxsession({task:"addcat",title:c,lid:b},function(d){if(a){a(d)}})};rssClient.prototype.delsyscat=function(b,a){pkrss.ajax.ajaxsession({task:"rsscatsysdelitem",idarray:b},function(c){if(a){a(c)}})};rssClient.prototype.exportsyscatopml=function(b,a){pkrss.ajax.ajax2(pkrss_feedajaxurl,{task:"rsscatsysexportopml",lid:b},function(c){if(a){a(c)}})};rssClient.prototype.exportusercatopml=function(a){pkrss.ajax.ajaxsession({task:"rsscatuserexportopml"},function(b){if(a){a(b)}})};rssClient.prototype.queryusertab=function(b,a){pkrss.ajax.ajaxsession({task:"usertable",catalogid:b},function(c){if(a){a(c)}})};rssClient.prototype.useraddtabfromsys=function(d,b,c,a){pkrss.ajax.ajaxsession({task:"rsstableuseraddsys",catalogid:d,idarray:b,prefix:c},function(e){if(a){a(e)}})};rssClient.prototype.addurl=function(d,c,b,a){pkrss.ajax.getPkData({task:"addurl",cid:d,type:c,url:b},function(e){if(a){a(e)}})};rssClient.prototype.useraddtab=function(d,c,b,a){pkrss.ajax.ajaxsession({task:"addfeed",catalogid:d,lid:c,feed:b},function(e){if(a){a(e)}})};rssClient.prototype.userdeltab=function(c,b,a){pkrss.ajax.ajaxsession({task:"rsstableuserdelitem",catalogid:c,idarray:b},function(d){if(a){a(d)}})};rssClient.prototype.querykeyword=function(b,a){if(!b){b="r"}pkrss.ajax.getPkCache({task:"queryrsskeyword",type:b,start:0,limit:20},function(c){if(a){a(c)}})};rssClient.prototype.addkeyword=function(b,c,a){if(!c){c="r"}pkrss.ajax.getPkData({task:"rsskeyword",query:b,type:c},function(d){if(a){a(d)}})};rssClient.prototype.rssfulllist=function(e,g,f,d,b,c,a){pkrss.ajax.getPkCache({task:"rssfulllist",lid:e,cid:g,tid:f,pid:d,imode:b,icount:c},function(h){if(a){a(h)}})};rssClient.prototype.loadrssfulllistinterestinfo=function(b,d,c,a){pkrss.ajax.getPkCache({task:"loadrssfulllistinterestinfo",lid:b,cid:d,tid:c},function(e){if(a){a(e)}})};rssClient.prototype.lovetabfulllistinterestinfo=function(b,d,c,a){pkrss.ajax.getPkCache({task:"lovetabfulllistinterestinfo",lid:b,cid:d,tid:c,cache:"no"},function(e){if(a){a(e)}})};rssClient.prototype.hatetabfulllistinterestinfo=function(b,d,c,a){pkrss.ajax.getPkCache({task:"hatetabfulllistinterestinfo",lid:b,cid:d,tid:c,cache:"no"},function(e){if(a){a(e)}})};rssClient.prototype.lovetabfulllistiteminterestinfo=function(b,e,d,c,a){pkrss.ajax.getPkCache({task:"lovetabfulllistiteminterestinfo",lid:b,cid:e,tid:d,iid:c,cache:"no"},function(f){if(a){a(f)}})};rssClient.prototype.hatetabfulllistiteminterestinfo=function(b,e,d,c,a){pkrss.ajax.getPkCache({task:"hatetabfulllistiteminterestinfo",lid:b,cid:e,tid:d,iid:c,cache:"no"},function(f){if(a){a(f)}})};rssClient.prototype.rssreplylistpage=function(d,c,b,a){pkrss.ajax.getPkCache({task:"rssreplylistpage",ktype:d,kval:c,pid:b},function(e){if(a){a(e)}})};rssClient.prototype.rssreply=function(d,b,c,a){pkrss.ajax.getPkData({task:"rssreply",ktype:d,kval:b,pid:0,msg:c,cache:"no",plateform:pkrss.plateform.getPlateformName()},function(e){if(a){a(e)}})};rssClient.prototype.rssreplylove=function(b,a){pkrss.ajax.getPkData({task:"rssreplylove",id:b,cache:"no"},function(c){if(a){a(c)}})};rssClient.prototype.rssreplyhate=function(b,a){pkrss.ajax.getPkData({task:"rssreplyhate",id:b,cache:"no"},function(c){if(a){a(c)}})};rssClient.prototype.queryrss=function(d,b,c,a){pkrss.ajax.getPkCache({task:"searchrsskeyword",key:d,type:b,lid:c},function(e){if(a){a(e)}})};pkrss.define("pkrss.model",{c2s:new rssClient()});function rssresponse(){this.data=[]}rssresponse.prototype.push=function(b,a){var c=false;if(a){if(!this.data[b]){this.data[b]=[];c=true}this.data[b].push(a)}return c};rssresponse.prototype.runClean=function(d,g,f,c){var b=this.data[d];if(!b){return}if(!c){this.data[d]=null}for(var e in b){b[e](g,f)}};pkrss.define("pkrss.model",{response:new rssresponse()});function rssevent(){this.rssgroupchanged="rssgroupchanged";this.newsItemAppend="newsItemAppend";this.localeChanged="localeChanged";this.catalogChanged="catalogChanged";this.tableChanged="tableChanged";this.moreRssItem="moreRssItem"}pkrss.define("pkrss.model",{event:new rssevent()});function rsslocale(){this.data=null}rsslocale.prototype.loaddbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.loaddbdata(b,a)}else{if(a){a(null)}}};rsslocale.prototype.savedbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savedbdata(b,a)}};rsslocale.prototype.init=function(c,a){if(pkrss.model&&pkrss.model.response){if(!pkrss.model.response.push("l_list",a)){return}}if(!this.data&&!c){var b=this;this.loaddbdata("l_list",function(d){b.data=d;b._initlocale2(c,a);b=null})}else{this._initlocale2(c,a)}};rsslocale.prototype._initlocale2=function(c,a){if(!this.data){if((typeof(pkRssLocaleJs)!="undefined")&&pkRssLocaleJs){this.data=pkRssLocaleJs;if(this.data&&this.data.length){this.savedbdata("l_list",this.data)}}}if(c||this.data==null||!this.data.length){var b=this;pkrss.model.c2s.queryserverlocale(pkrss.profile.usersetting.locale,true,function(d){if(d&&d.items&&d.items.length){b.data=d.items;if(!pkrss.profile.usersetting.selectedLId){pkrss.profile.usersetting.selectedLId=b.curlocaleid();pkrss.profile.saveUserData()}if(d.catalog){pkrss.model.catalog.onDataReceived(d.catalog)}if(d.table){pkrss.model.table.onDataReceived(d.table)}b.savedbdata("l_list",d.items)}if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean("l_list",b.data)}b=null},function(){if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean("l_list",null)}},"json")}else{if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean("l_list",this.data)}}};rsslocale.prototype.getlocaleinfo=function(a){var c=this.data;if(c){for(var b in c){if(c[b].locale==a){return c[b]}}}return null};rsslocale.prototype.getblurlocaleinfo=function(a){if(!a){return null}var d=this.getlocaleinfo(a);if(!d){var f=a.indexOf("_");if(f>=0){a=a.substring(0,f)}var e;var c=this.data;if(c){for(var b in c){e=c[b].locale;f=e.indexOf("_");if(f>=0){e=e.substring(0,f)}if(e==a){d=c[b];break}}}}return d};rsslocale.prototype.getlocaleinfobyid=function(c,d){var b=this.data;if(b){for(var a in b){if(b[a].id==c){return b[a]}}}if(d&&b.length>0){return b[0]}return null};rsslocale.prototype.curlocaleid=function(){if(pkrss.profile.usersetting.selectedLId){return pkrss.profile.usersetting.selectedLId}var a=this.getlocaleinfo(pkrss.profile.usersetting.locale);if(a){return a.id}return 0};rsslocale.prototype.curUiId=function(){var a=this.getlocaleinfo(pkrss.profile.usersetting.uilang);if(a){return a.id}return 0};rsslocale.prototype.curlocale=function(){if(!pkrss.profile.usersetting.selectedLId){return pkrss.profile.usersetting.locale}var a=this.getlocaleinfobyid(pkrss.profile.usersetting.selectedLId);if(a){return a.locale}return"en"};rsslocale.prototype.querylocaleinfobyid=function(c,a){if(!a){return}var d=this.getlocaleinfobyid(c);if(d){a(d);return}var b="l_list_q_"+c;if(pkrss.model&&pkrss.model.response){if(!pkrss.model.response.push(b,a)){return}}this.init(false,function(f){if(f){for(var e in f){if(f[e].id==c){if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean(b,f[e])}return}}}if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean(b,null)}})};pkrss.define("pkrss.model",{locale:new rsslocale()});pkrss.cls.rsscatalog=function(){this.data=[]};pkrss.cls.rsscatalog.prototype.loaddbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.loaddbdata(b,a)}else{if(a){a(null)}}};pkrss.cls.rsscatalog.prototype.savedbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savedbdata(b,a)}};pkrss.cls.rsscatalog.prototype.init=function(b,a){if(!pkrss.profile.usersetting.selectedLId){pkrss.profile.usersetting.selectedLId=1}this.init2(pkrss.profile.usersetting.selectedLId,b,a)};pkrss.cls.rsscatalog.prototype.init2=function(d,c,a){if(pkrss.model&&pkrss.model.response){if(!pkrss.model.response.push("c_"+d,a)){return}}if(!this.data[d]&&!c){var b=this;this.loaddbdata("c_"+d,function(e){if(e){b.data[d]=e}b._initnav3(d,c,a);b=null})}else{this._initnav3(d,c,a)}};pkrss.cls.rsscatalog.prototype.onDataReceived=function(a){if(!a||!a.length){return}var d;var f;var c;var e=this.data;for(var b in a){d=a[b];c=e[d.localeid];if(!c){e[d.localeid]=[];c=e[d.localeid]}f=false;for(var b in c){if(c[b].id==d.id){f=true;c[b]=d;break}}if(!f){c.push(d)}}for(var b in e){this.savedbdata("c_"+b,e[b])}};pkrss.cls.rsscatalog.prototype.getYourCatalogData=function(){if(pkrss.model&&pkrss.model.catalog&&pkrss.model.catalog.extra&&pkrss.model.catalog.extra.data){return pkrss.model.catalog.extra.data}return null};pkrss.cls.rsscatalog.prototype._initnav3=function(d,c,a){if(c||!this.data[d]){var b=this;pkrss.model.c2s.queryserverenav(d,function(e){if(e&&e.items){b.savedbdata("c_"+d,e.items);b.data[d]=e.items}if(!b.data[d]){b.data[d]=[]}if(e.table){pkrss.model.table.onDataReceived(e.table)}if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean("c_"+d,b.data[d])}b=null})}else{if(pkrss.model&&pkrss.model.response){pkrss.model.response.runClean("c_"+d,this.data[d])}}};pkrss.cls.rsscatalog.prototype.getnavfromlocaleid=function(a){return this.data[a]};pkrss.cls.rsscatalog.prototype.getnavinfo=function(e){if(!e){return null}var d,a;if(pkrss.model&&pkrss.model.catalog&&pkrss.model.catalog.extra){d=pkrss.model.catalog.extra.data;for(var c in d){a=d[c];if(a.id==e){return a}}}for(var b in this.data){d=this.data[b];for(var c in d){a=d[c];if(a.id==e){return a}}}return null};pkrss.cls.rsscatalog.prototype.querynavinfo=function(c,a){if(!a){return}var b=this.getnavinfo(c);if(b){a(b);return}if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.loaddbrangedata("c_-1000","c_999999",function(d){var h=null;if(d){for(var g in d){var f=d[g];for(var e in f){if(f[e]&&(f[e].id==c)){h=f[e];break}}if(h){break}}}a(h)})}else{a(null)}};pkrss.cls.rsscatalog.prototype.getCatalogClickPage=function(c,a){if(pkrss.model&&pkrss.model.catalog&&pkrss.model.catalog.extra){var b=pkrss.model.catalog.extra.getInfoByCid(c);if(b&&b.targetPageName){return b.targetPageName}}return a};pkrss.cls.rsscatalog.prototype.updateCatalogInfo=function(a){if(a.id>=0){this.savedbdata("c_"+a.localeid,data[a.localeid])}else{if(pkrss.model&&pkrss.model.catalog&&pkrss.model.catalog.extra){pkrss.model.catalog.extra.saveinfo(a.id)}}};pkrss.define("pkrss.model",{catalog:new pkrss.cls.rsscatalog()});pkrss.define("pkrss.event.value.catalog",{ItemsChanged:"catalogItemsChanged"});pkrss.cls.rsstable=function(){this.data={}};pkrss.cls.rsstable.prototype.loaddbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.loaddbdata(b,a)}else{if(a){a(null)}}};pkrss.cls.rsstable.prototype.savedbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savedbdata(b,a)}};pkrss.cls.rsstable.prototype.init=function(b,a){this.init2(pkrss.profile.usersetting.selectedCId,b,a)};pkrss.cls.rsstable.prototype.initnews=function(c,d,b,a){if(c){d="l_"+c}this.init2(d,b,a,"n_",pkrss.model.c2s.queryserverenewstab)};pkrss.cls.rsstable.prototype.id_searchengine=427;pkrss.cls.rsstable.prototype.initsearchengine=function(b,a){this.init2(this.id_searchengine,b,a,"n_",pkrss.model.c2s.queryserverenewstab)};pkrss.cls.rsstable.prototype.init2=function(f,e,a,c,d){if(!c){c=""}if(!d){d=pkrss.model.c2s.queryserveretab}if(!pkrss.model.response.push("t_"+c+f,a)){return}if(!this.data[c+f]&&!e){var b=this;this.loaddbdata("t_"+c+f,function(g){if(g){b.data[c+f]=g}b._init3(f,e,a,c,d);b=null})}else{this._init3(f,e,a,c,d)}};pkrss.cls.rsstable.prototype._init3=function(h,g,a,d,f){var e=this.data;var c=d+h;if(!isNaN(h)&&(Number(h)<=0)){g=false;if(!e[c]){e[c]=[];this.savedbdata("t_"+c,[])}}if(g||!e[c]){var b=this;f(h,function(l){var i=d+h;if(l){b._filterTableInfo(l,true);b.data[i]=l;b.savedbdata("t_"+i,l)}pkrss.model.response.runClean("t_"+i,l,h);b=null})}else{pkrss.model.response.runClean("t_"+c,e[c],h)}};pkrss.cls.rsstable.prototype.addUrlToServerCid=function(e,d,c,a){var b=this;pkrss.model.c2s.addurl(e,d,c,function(i){if(i&&(i.code==0)){var g=(i.type=="URL"?"n_":"");var f=g+i.value.cid;var h=b.data[f];if(!h){b.data[f]=[];h=b.data[f]}h.push({id:i.value.id,catalogid:i.value.cid,title:i.value.title,url:i.value.url,type:i.type});b.savedbdata("t_"+f,h);pkrss.profile.saveUserData()}if(a){a(i)}})};pkrss.cls.rsstable.prototype.addtocid=function(f,g){var d=this.data;var b=[];var h=d[""+f];var k;for(var e in g){k=false;for(var c in h){if(h[c].url==g[e].url){k=true;break}}if(k){continue}g[e].id=pkrss.profile.usersetting.usertableid++;b.push(g[e])}if(!b||!b.length){return false}h=h.concat(b);d[""+f]=h;this.savedbdata("t_"+f,h);pkrss.profile.saveUserData();var a=pkrss.model.catalog.getnavinfo(f);if(a){a.count=h.length;pkrss.model.catalog.updateCatalogInfo(a)}return true};pkrss.cls.rsstable.prototype.generatorItemFromUrl=function(a,b,c){if(!a){return null}if(!c){c=pkrss.profile.usersetting.selectedCId}if(!b){b=a}return{catalogid:c,title:b,url:a,type:null,longitude:null,latitude:null}};pkrss.cls.rsstable.prototype.removecid=function(b,a){this.removecids(b,[a])};pkrss.cls.rsstable.prototype.removecids=function(h,f){var c=this.data;if(!f||!f.length){return}var a=c[""+h];var e=[];var g=-1;for(var b in a){g=pkrss.inArray(a[b].id,f);if(g<0){e.push(a[b])}}c[""+h]=e;this.savedbdata("t_"+h,e);var d=pkrss.model.catalog.getnavinfo(h);if(d){d.count=e.length;pkrss.model.catalog.updateCatalogInfo(d)}};pkrss.cls.rsstable.prototype.clearcid=function(c){var a=this.data;a[""+c]=[];this.savedbdata("t_"+c,[]);var b=pkrss.model.catalog.getnavinfo(c);if(b){b.count=a[""+c].length;pkrss.model.catalog.updateCatalogInfo(b)}};pkrss.cls.rsstable.prototype.moveTo=function(f,b,a){var k=this.data;var d=k[""+f];var e=k[""+b];if(!d||!d.length||!a||!a.length){return}var m;var n;var o=[];for(var h=0,l=d.length;h<l;++h){n=d[h];m=pkrss.inArray(n.id,a);if(m<0){o.push(n);continue}n.catalogid=b;e.push(n)}k[""+f]=o;this.savedbdata("t_"+f,o);this.savedbdata("t_"+b,e);var g=pkrss.model.catalog.getnavinfo(f);if(g){g.count=o.length;pkrss.model.catalog.updateCatalogInfo(g)}g=pkrss.model.catalog.getnavinfo(b);if(g){g.count=e.length;pkrss.model.catalog.updateCatalogInfo(g)}};pkrss.cls.rsstable.prototype._filterTableInfo=function(b,c){for(var a in b){b[a].title=pkrss.utils.html.replaceHtmlEntites(b[a].title);b[a].lastitemdate="0000-00-00 00:00:00";b[a].itemcount=0}};pkrss.cls.rsstable.prototype.onDataReceived=function(a){if(!a||!a.length){return}var g=this.data;var d;var f;var c;var e;this._filterTableInfo(a,true);for(var b in a){d=a[b];e=""+d.catalogid;c=g[e];if(!c){g[e]=[];c=g[e]}f=false;for(var b in c){if(c[b].id==d.id){f=true;c[b]=d;break}}if(!f){c.push(d)}}for(var b in g){this.savedbdata("t_"+b,g[b])}};pkrss.cls.rsstable.prototype.gettabfromcatalogid=function(a){return this.data[""+a]};pkrss.cls.rsstable.prototype.gettabinfo=function(e){if(!e){return null}var d=this.data;var a,f;for(var b in d){a=d[b];for(var c in a){f=a[c];if(f.id==e){return f}}}return null};pkrss.cls.rsstable.prototype.gettabinfobyurl=function(b){if(!b){return null}var e=this.data;var a,f;for(var c in e){a=e[c];for(var d in a){f=a[d];if(f.url==b){return f}}}return null};pkrss.cls.rsstable.prototype.gettabidbyurl=function(f,b){if(!b){return 0}if(!f){var e=this.gettabinfobyurl(b);if(e){return e.id}return 0}var a=this.gettabfromcatalogid(f);if(!a||!a.length){return 0}var d;for(var c in a){d=a[c];if(d.url==b){return d.id}}return 0};pkrss.cls.rsstable.prototype.querytabinfo=function(c,a){if(!a){return}var b=this.gettabinfo(c);if(b){a(b);return}pkrss.utils.db.loaddbrangedata("t_-1000","t_999999",function(d){var h=null;if(d){for(var g in d){var f=d[g];for(var e in f){if(f[e]&&(f[e].id==c)){h=f[e];break}}if(h){break}}}a(h)})};pkrss.cls.rsstable.prototype.refreshtabinfo=function(f,b){if(!f||!b||!b.length){return}var a,e=this.data;for(var c in e){a=e[c];for(var d in a){e=a[d];if(e.id==f){return}}}};pkrss.define("pkrss.model",{table:new pkrss.cls.rsstable()});pkrss.cls.rssitem=function(){this.fulllist_lid=0;this.fulllist_cid=0;this.fulllist_tid=0;this.fulllist_pid=0;this.fulllist_imode=1;this.fulllist_icount=20;this.fulllist_enablemore=false;this.fulllist_interestinfo=[];this._generatorId=800000000;this.data=[]};pkrss.cls.rssitem.prototype.loaddbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.loaddbdata(b,a)}else{if(a){a(null)}}};pkrss.cls.rssitem.prototype.savedbdata=function(b,a){if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savedbdata(b,a)}};pkrss.cls.rssitem.prototype.loadPageData=function(a,d,c,b){if(!c){c=1}if(!b){b=20}if(d){this.inittabfulllistitem(pkrss.profile.usersetting.selectedLId,pkrss.profile.usersetting.selectedCId,pkrss.profile.usersetting.selectedTId,c,b)}this.moretabfulllistitem(a)};pkrss.cls.rssitem.prototype.inittabfulllistitem=function(c,e,d,a,b){if(d){e=0;c=0}if(e){c=0}this.fulllist_pid=0;this.fulllist_lid=c;this.fulllist_cid=e;this.fulllist_tid=d;if(!a){a=0}if(!b){b=20}this.fulllist_imode=a;this.fulllist_icount=b;this.fulllist_enablemore=true;pkrss.profile.usersetting.selectedIId=0;this.data=[];pkrss.event.trigger(pkrss.model.event.rssgroupchanged,{lid:c,cid:e,tid:d,imode:a,icount:b})};pkrss.cls.rssitem.prototype.gettabfulllistitem=function(a){if(a){a(this.data)}return this.data};pkrss.cls.rssitem.prototype.moretabfulllistitem=function(a){if(!this.fulllist_enablemore){if(a){a(null)}return}++this.fulllist_pid;this.loadtabfulllistitem(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,this.fulllist_pid,this.fulllist_imode,this.fulllist_icount,a)};pkrss.cls.rssitem.prototype.loadtabfulllistitem=function(e,h,f,d,a,c,g){this.fulllist_enablemore=false;var b=this;pkrss.model.c2s.rssfulllist(e,h,f,d,a,c,function(m){var l=pkrss.profile.usersetting.settingNetworkCacheSupport;if(l){var i="loadtabfulllistitem_"+e+h+f+d+a+c;if(m&&m.items&&m.items.length){b.savedbdata(i,m);b._handletabfulllistitem(m,g)}else{b.loaddbdata(i,function(k){b._handletabfulllistitem(k,g)})}}else{b._handletabfulllistitem(m,g)}})};pkrss.cls.rssitem.prototype._handletabfulllistitem=function(e,c){var h=this;var a=[];if(e&&e.items&&e.items.length){var l,g;for(var b in e.items){l=false;g=e.items[b];for(var f in h.data){if(f.id==g.id){l=true;break}}if(!l){g.title=pkrss.utils.html.replaceHtmlEntites(g.title);a.push(g)}}for(var d in a){h.data.push(a[d])}if(c){c(a)}}else{if(c){c(null)}}this.fulllist_enablemore=true};pkrss.cls.rssitem.prototype.gettabfulllistinterestinfo=function(b){var a="fulllistinfo_"+this.fulllist_lid+"_"+this.fulllist_cid+"_"+this.fulllist_tid;if(this.fulllist_interestinfo[a]){if(b){b(this.fulllist_interestinfo[a])}return}pkrss.model.c2s.loadrssfulllistinterestinfo(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,function(c){pkrss.model.rssitem.fulllist_interestinfo[a]=c;if(b){b(c)}})};pkrss.cls.rssitem.prototype.lovetabfulllistinterestinfo=function(c){var a="fulllistinfo_"+this.fulllist_lid+"_"+this.fulllist_cid+"_"+this.fulllist_tid;var b=this.fulllist_interestinfo[a];if(!b){return}pkrss.model.c2s.lovetabfulllistinterestinfo(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,function(d){++b.lovecount;++b.statcount;if(c){c(b)}b=null})};pkrss.cls.rssitem.prototype.hatetabfulllistinterestinfo=function(c){var a="fulllistinfo_"+this.fulllist_lid+"_"+this.fulllist_cid+"_"+this.fulllist_tid;var b=this.fulllist_interestinfo[a];if(!b){return}pkrss.model.c2s.hatetabfulllistinterestinfo(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,function(d){++b.statcount;++b.hatecount;if(c){c(b)}b=null})};pkrss.cls.rssitem.prototype.lovetabfulllistiteminterestinfo=function(b,c){var a=this;pkrss.model.c2s.lovetabfulllistiteminterestinfo(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,b,function(d){var e=a.getItemById(b);b=null;++e.lovecount;++e.statcount;if(c){c(e)}a=null})};pkrss.cls.rssitem.prototype.hatetabfulllistiteminterestinfo=function(b,c){var a=this;pkrss.model.c2s.hatetabfulllistinterestinfo(this.fulllist_lid,this.fulllist_cid,this.fulllist_tid,b,function(d){var e=a.getItemById(b);b=null;++e.hatecount;++e.statcount;if(c){c(e)}a=null})};pkrss.cls.rssitem.prototype.getDataByTableId=function(d,a){var c=[];if(this.data){for(var b in this.data){if(this.data[b].tid==d){c.push(this.data[b])}}}return c};pkrss.cls.rssitem.prototype.initbytableid=function(d,c,a){var b=this;pkrss.model.source.xmlsource(d,c,function(e,k){var h=b.data;var l;if(e&&e.feed&&e.feed.entries&&e.feed.entries.length){l=e.feed.entries;var g;for(var f in e.feed.entries){g=e.feed.entries[f];if(!g.id){g.id=b.generatorId(g.id)}}}else{l=[]}if(e&&e.isPrependMode){b.data=h.concat(l)}else{b.data=l}if(a){a(true,e,k)}})};pkrss.cls.rssitem.prototype.generatorId=function(){return ++this._generatorId};pkrss.cls.rssitem.prototype.itemFilter=function(c,b){if(!c){return c}var a={};var d=pkrss.utils.html.replaceHtmlTags;pkrss.extend(a,c);if(c.title){a.title=d(c.title,b)}if(c.author){a.author=d(c.author,b)}if(c.publishedDate){a.publishedDate=d(c.publishedDate,b)}if(c.link){a.link=d(c.link,b)}if(c.description){a.content=d(c.description,b)}return a};pkrss.cls.rssitem.prototype.itemFilterHtml=function(b){if(!b){return b}var a={};var c=pkrss.utils.html.replaceHtmlEntites;pkrss.extend(a,b);if(b.title){a.title=c(b.title)}if(b.author){a.author=c(b.author)}if(b.publishedDate){a.publishedDate=c(b.publishedDate)}if(b.link){a.link=c(b.link)}if(b.description){a.description=c(b.description)}if(b.content){a.content=c(b.content)}return a};pkrss.cls.rssitem.prototype.getItemByIndex=function(a,b,c){if((0<=a)&&(a<this.data.length)){return(b?this.itemFilterHtml(this.data[a],c):this.data[a])}return null};pkrss.cls.rssitem.prototype.itemLength=function(){return this.data.length};pkrss.cls.rssitem.prototype.operIndex=function(e,c){var d=this.data;if(d){var b=0;for(var a in d){if(d[a].id==e){b=Number(a)+c;if(b<0){b=d.length+b}if((0<=b)&&b<d.length){return d[b]}break}}return d[0]}return null};pkrss.cls.rssitem.prototype.filterIndex=function(a){var b=this.data;if(a<0){if(b.length>0){a=b.length-1}else{a=0}}else{if(a>=b.length){a=0}}return a};pkrss.cls.rssitem.prototype.getItemById=function(c){var b=this.data;for(var a in b){if(b[a].id==c){return b[a]}}return null};pkrss.cls.rssitem.prototype.saveCurItemInfo=function(b){var a={lid:this.fulllist_lid,cid:this.fulllist_cid,tid:this.fulllist_tid,iid:b};a.data=this.getItemById(b);if(pkrss.utils&&pkrss.utils.db){pkrss.utils.db.savebindata("pkrss_curitem",a)}else{this.savedbdata("pkrss_curitem",a)}};pkrss.cls.rssitem.prototype.loadCurItemInfo=function(a,b){if(pkrss.utils&&pkrss.utils.db){var c=pkrss.utils.db.loadbindata("pkrss_curitem");if(b&&c){pkrss.utils.db.savebindata("pkrss_curitem",null)}a(c)}else{this.loaddbdata("pkrss_curitem",function(d){if(b&&d){this.savedbdata("pkrss_curitem",null)}a(d)})}};pkrss.define("pkrss.model",{rssitem:new pkrss.cls.rssitem()});pkrss.cls.newstype_module_base=function(){this.name="undifined";this.text="undifined"};pkrss.cls.newstype_module_base.prototype.init=function(b,a){};pkrss.cls.newstype_module_base.prototype.onActive=function(){};pkrss.cls.newstype_module_base.prototype.onDeactive=function(){};pkrss.cls.newstype_module_base.prototype.onHandle=function(){};pkrss.cls.newstype_module_module=function(){this.items=[];this.oldActiveItem=null};pkrss.cls.newstype_module_module.prototype.init=function(b,a){};pkrss.cls.newstype_module_module.prototype.getitem=function(a){var c;for(var b in this.items){c=this.items[b];if(c.name==a){return c}}return null};pkrss.cls.newstype_module_module.prototype.changemodule=function(a){var b=this.getitem(a);if(this.oldActiveItem!=b){if(this.oldActiveItem&&this.oldActiveItem.onDeactive){this.oldActiveItem.onDeactive()}this.oldActiveItem=b;if(this.oldActiveItem.onActive){this.oldActiveItem.onActive()}}};pkrss.cls.newstype_module_module.prototype.activeNewspaper=function(a){if(this.oldActiveItem.onActive){if(a){this.oldActiveItem.onActive()}else{this.oldActiveItem.onDeactive()}}};pkrss.cls.newstype_module_module.prototype.addmodule=function(a){this.items.push(a)};pkrss.cls.newstype_module_module.prototype.loadrssitem=function(a){if(this.oldActiveItem&&this.oldActiveItem.loadrssitem){this.oldActiveItem.loadrssitem(a)}};pkrss.define("pkrss.model.newstype",{module:new pkrss.cls.newstype_module_module()});function modelview_locale(){this.localeSelector="#pk_ul_locale"}modelview_locale.prototype.init=function(c,a){this.localeSelector=c;var b=this;pkrss.model.locale.init(false,function(d){b.loadlocales(pkrss.q(b.localeSelector),d);a(d)})};modelview_locale.prototype.loadlocales=function(f,b){var d="";if(b){var e=false;for(var c in b){if(b[c].locale==pkrss.profile.usersetting.locale){e=true;pkrss.profile.usersetting.selectedLId=b[c].id}}if(!e){pkrss.profile.usersetting.locale="en"}for(var c in b){var a=b[c];d+="<li ";if(a.locale==pkrss.profile.usersetting.locale){d+='class="pkflagico_sel"';pkrss.profile.usersetting.selectedLId=a.id}d+='><a href="#" onclick="return pkrss.modelview.locale.changelocale(\''+a.id+'\')" id="pk_locale_'+a.id+'" class="pk_locale" title="'+a.country+'"><span class="pkflagico pkflagico-'+a.locale+'"></span></a></li>'}}f.html(d)};modelview_locale.prototype.changelocale=function(c){var a=pkrss.profile.usersetting;var b=a.selectedLI;a.selectedLId=c;a.selectedCId=0;a.selectedTId=0;pkrss.q(".pkflagico_sel").removeClass("pkflagico_sel");pkrss.q("#pk_locale_"+c).parent().addClass("pkflagico_sel");pkrss.event.trigger(pkrss.model.event.localeChanged,{lid:c,oldTid:b});return false};pkrss.define("pkrss.modelview",{locale:new modelview_locale()});function modelview_catalog(){this.catalogSelector="#navitem_rssCatalog";this.tableSelector="#navitem_rssTable"}modelview_catalog.prototype.init=function(b,d,a,c){this.catalogSelector=b;this.tableSelector=d;this.init_catandtab(a,c);this.init_rsschangeevent()};modelview_catalog.prototype.init_catandtab=function(a,c){var b=this;b.initcat(function(){if(c){pkrss.profile.usersetting.selectedTId=c}else{pkrss.profile.usersetting.selectedTId=0}b.inittab(a);b=null})};modelview_catalog.prototype.init_rsschangeevent=function(){var a=this;pkrss.q(this.catalogSelector).change(function(c){var b=pkrss.q(this).val();if(pkrss.profile.usersetting.selectedCId==b){return}var e=pkrss.profile.usersetting.selectedCId;var d=pkrss.profile.usersetting.selectedTId;pkrss.profile.usersetting.selectedCId=b;pkrss.profile.usersetting.selectedTId=0;pkrss.modelview.catalog.inittab();pkrss.event.trigger(pkrss.model.event.catalogChanged,{cid:b,oldCid:e});pkrss.event.trigger(pkrss.model.event.tableChanged,{tid:b,oldTid:d})});pkrss.q(this.tableSelector).change(function(c){var b=pkrss.q(this).val();var d=pkrss.profile.usersetting.selectedTId;if(pkrss.profile.usersetting.selectedTId==b){return}pkrss.profile.usersetting.selectedTId=b;pkrss.event.trigger(pkrss.model.event.tableChanged,{tid:b,oldTid:d})});pkrss.event.bind(pkrss.model.event.localeChanged,function(){a.init_catandtab(function(){pkrss.event.trigger(pkrss.model.event.catalogChanged,{cid:pkrss.profile.usersetting.selectedCId,oldCid:0});pkrss.event.trigger(pkrss.model.event.tableChanged,{tid:pkrss.profile.usersetting.selectedTId,oldTid:0})})})};modelview_catalog.prototype.initcat=function(a){pkrss.profile.usersetting.selectedCId=0;var b=this;pkrss.model.catalog.init(false,function(c){var d=pkrss.q(b.catalogSelector);b.loadnav(d,c);b.loadnavlabel(d);b=null;if(a){a()}})};modelview_catalog.prototype.loadnav=function(e,d){var c="";c+="<option value='0'>"+pkgetLocaleString("All")+"</option>";if(d){for(var a in d){var b=d[a];c+="<option value='"+b.id+"'>"+b.text+"</option>"}}e.empty();e.append(c)};modelview_catalog.prototype.loadnavlabel=function(b){try{b.val(pkrss.profile.usersetting.selectedCId)}catch(a){}};modelview_catalog.prototype.inittab=function(a){var b=this;pkrss.model.table.init(false,function(c){var d=pkrss.q(b.tableSelector);b.loadtab(d,c);b.loadtablabel(d);b=null;if(a){a()}})};modelview_catalog.prototype.loadtab=function(h,b){var d="";d+="<option value='0'>"+pkgetLocaleString("All")+"</option>";if(b){for(var c in b){var f=b[c];d+="<option value='"+f.id+"'>"+(f.title||f.text)+"</option>"}}h.empty();h.append(d);try{if(this.currentChangeCatalogTableId){var a=this.currentChangeCatalogTableId;this.currentChangeCatalogTableId=0;h.val(a);h.trigger("change")}}catch(g){}};modelview_catalog.prototype.loadtablabel=function(a){a.val(""+pkrss.profile.usersetting.selectedTId)};modelview_catalog.prototype.changeRssTable=function(d,b){var c=pkrss.q(this.catalogSelector);var a=pkrss.q(this.tableSelector);if(d&&c.val()!=d){this.currentChangeCatalogTableId=b;c.val(d);c.trigger("change")}else{if(b&&a.val()!=b){a.val(b);a.trigger("change")}}return false};pkrss.define("pkrss.modelview",{catalog:new modelview_catalog()});pkrss.cls.itemplugin_base=function(){this.name="base"};pkrss.cls.itemplugin_base.prototype.getUIHtml=function(){return null};pkrss.cls.itemplugins=function(){this.items=[];this.uiwnd=null;this.init(pkrss.rootSelector)};pkrss.cls.itemplugins.prototype.init=function(c){var a=this;pkrss.event.bind(pkrss.model.event.newsItemAppend,function(d){a.onItemsAppended(d)});var b='<div id="rssitem_plugins_container_parent" class="tool_float_pane_container pkfollowbottom pkfollowleft"></div>';if(!c){c="body"}pkrss.q(c).append(b);this.uiwnd=pkrss.q("#rssitem_plugins_container_parent")};pkrss.cls.itemplugins.prototype.onItemsAppended=function(a){a.find(".rss_bottom").append('<span onclick="return pkrss.modelview.itemplugin.factory.onItemClick(this)" style="cursor:pointer">&gt;&gt;</span>')};pkrss.cls.itemplugins.prototype.onItemClick=function(c){c=pkrss.q(c);var e=this.uiwnd;e.empty();var b;var d=c.parents(".box").data("iid");for(var a in this.items){b=this.items[a].getUIHtml(d);if(b){e.append(b)}}pkrss.utils.html.loadPlateformJs([{ns:"pkrss.cls.floatpanel",src:pkrss.ajax.pkurlresurlpath+"js/modelview/floatpanel.js"}],function(f){if(!f){return}pkrss.cls.floatpanel.prototype.onHoverCall.call(this,e,c,"tool_right_pane_li_a_sel")})};pkrss.cls.itemplugins.prototype.regist=function(a){this.items.push(a)};pkrss.define("pkrss.modelview.itemplugin",{base:pkrss.cls.itemplugin_base,factory:new pkrss.cls.itemplugins()});pkrss.cls.itemplugin_share=function(){pkrss.modelview.itemplugin.base.call(this);this.init()};pkrss.cls.itemplugin_share.prototype=new pkrss.modelview.itemplugin.base();pkrss.cls.itemplugin_share.prototype.init=function(){pkrss.modelview.itemplugin.factory.regist(this)};pkrss.cls.itemplugin_share.prototype.getUIHtml=function(a){pkrss.model.rssitem.saveCurItemInfo(a);var b="newsshare.htm";this.htm='<a href="'+b+'" target="_blank">'+pkgetLocaleString("Share")+"</a><br />";return this.htm};pkrss.define("pkrss.modelview.itemplugin",{share:new pkrss.cls.itemplugin_share()});
/*!
 * getStyleProperty by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 */
(function(c){var d="Webkit Moz ms Ms O".split(" ");var b=document.documentElement.style;function a(h){if(!h){return}if(typeof b[h]==="string"){return h}h=h.charAt(0).toUpperCase()+h.slice(1);var f;for(var g=0,e=d.length;g<e;g++){f=d[g]+h;if(typeof b[f]==="string"){return f}}}if(typeof define==="function"&&define.amd){define(function(){return a})}else{c.getStyleProperty=a}})(window);(function(e,g){var c=document.defaultView;var a=c&&c.getComputedStyle?function(i){return c.getComputedStyle(i,null)}:function(i){return i.currentStyle};function d(k){var i=parseFloat(k);var l=k.indexOf("%")===-1&&!isNaN(i);return l&&i}var b=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function f(){var m={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var l=0,k=b.length;l<k;l++){var n=b[l];m[n]=0}return m}function h(l){var i=l("boxSizing");var k;(function(){if(!i){return}var p=document.createElement("div");p.style.width="200px";p.style.padding="1px 2px 3px 4px";p.style.borderStyle="solid";p.style.borderWidth="1px 2px 3px 4px";p.style[i]="border-box";var n=document.body||document.documentElement;n.appendChild(p);var o=a(p);k=d(o.width)===200;n.removeChild(p)})();function m(C){if(typeof C==="string"){C=document.querySelector(C)}if(!C||typeof C!=="object"||!C.nodeType){return}var A=a(C);if(A.display==="none"){return f()}var t={};t.width=C.offsetWidth;t.height=C.offsetHeight;var B=t.isBorderBox=!!(i&&A[i]&&A[i]==="border-box");for(var x=0,y=b.length;x<y;x++){var v=b[x];var w=A[v];var n=parseFloat(w);t[v]=!isNaN(n)?n:0}var z=t.paddingLeft+t.paddingRight;var s=t.paddingTop+t.paddingBottom;var E=t.marginLeft+t.marginRight;var q=t.marginTop+t.marginBottom;var D=t.borderLeftWidth+t.borderRightWidth;var p=t.borderTopWidth+t.borderBottomWidth;var o=B&&k;var r=d(A.width);if(r!==false){t.width=r+(o?0:z+D)}var u=d(A.height);if(u!==false){t.height=u+(o?0:s+p)}t.innerWidth=t.width-(z+D);t.innerHeight=t.height-(s+p);t.outerWidth=t.width+E;t.outerHeight=t.height+q;return t}return m}if(typeof define==="function"&&define.amd){define(["get-style-property"],h)}else{e.getSize=h(e.getStyleProperty)}})(window);(function(b,i){var g=(function(){if(i.matchesSelector){return"matchesSelector"}var o=["webkit","moz","ms","o"];for(var m=0,l=o.length;m<l;m++){var n=o[m];var p=n+"MatchesSelector";if(i[p]){return p}}})();function e(m,l){return m[g](l)}function h(m){if(m.parentNode){return}var l=document.createDocumentFragment();l.appendChild(m)}function f(p,m){h(p);var n=p.parentNode.querySelectorAll(m);for(var o=0,l=n.length;o<l;o++){if(n[o]===p){return true}}return false}function d(m,l){h(m);return e(m,l)}var k;if(g){var a=document.createElement("div");var c=e(a,"div");k=c?e:d}else{k=f}if(typeof define==="function"&&define.amd){define(function(){return k})}else{window.matchesSelector=k}})(this,Element.prototype);
/*!
 * EventEmitter v4.1.0 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(b){function e(){}var d=e.prototype,a=Array.prototype.indexOf?true:false;function c(h,g){if(a){return g.indexOf(h)}var f=g.length;while(f--){if(g[f]===h){return f}}return -1}d._getEvents=function(){return this._events||(this._events={})};d.getListeners=function(f){var i=this._getEvents(),g,h;if(typeof f==="object"){g={};for(h in i){if(i.hasOwnProperty(h)&&f.test(h)){g[h]=i[h]}}}else{g=i[f]||(i[f]=[])}return g};d.getListenersAsObject=function(f){var h=this.getListeners(f),g;if(h instanceof Array){g={};g[f]=h}return g||h};d.addListener=function(f,i){var h=this.getListenersAsObject(f),g;for(g in h){if(h.hasOwnProperty(g)&&c(i,h[g])===-1){h[g].push(i)}}return this};d.on=d.addListener;d.defineEvent=function(f){this.getListeners(f);return this};d.defineEvents=function(f){for(var g=0;g<f.length;g+=1){this.defineEvent(f[g])}return this};d.removeListener=function(f,k){var i=this.getListenersAsObject(f),g,h;for(h in i){if(i.hasOwnProperty(h)){g=c(k,i[h]);if(g!==-1){i[h].splice(g,1)}}}return this};d.off=d.removeListener;d.addListeners=function(f,g){return this.manipulateListeners(false,f,g)};d.removeListeners=function(f,g){return this.manipulateListeners(true,f,g)};d.manipulateListeners=function(g,h,l){var k,m,n=g?this.removeListener:this.addListener,f=g?this.removeListeners:this.addListeners;if(typeof h==="object"&&!(h instanceof RegExp)){for(k in h){if(h.hasOwnProperty(k)&&(m=h[k])){if(typeof m==="function"){n.call(this,k,m)}else{f.call(this,k,m)}}}}else{k=l.length;while(k--){n.call(this,h,l[k])}}return this};d.removeEvent=function(f){var i=typeof f,h=this._getEvents(),g;if(i==="string"){delete h[f]}else{if(i==="object"){for(g in h){if(h.hasOwnProperty(g)&&f.test(g)){delete h[g]}}}else{delete this._events}}return this};d.emitEvent=function(f,h){var m=this.getListenersAsObject(f),l,k,g;for(k in m){if(m.hasOwnProperty(k)){l=m[k].length;while(l--){g=h?m[k][l].apply(null,h):m[k][l]();if(g===true){this.removeListener(f,m[k][l])}}}}return this};d.trigger=d.emitEvent;d.emit=function(f){var g=Array.prototype.slice.call(arguments,1);return this.emitEvent(f,g)};if(typeof define==="function"&&define.amd){define(function(){return e})}else{b.EventEmitter=e}}(this));
/*!
 * eventie v1.0.3
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
(function(d){var a=document.documentElement;var e=function(){};if(a.addEventListener){e=function(h,g,f){h.addEventListener(g,f,false)}}else{if(a.attachEvent){e=function(h,g,f){h[g+f]=f.handleEvent?function(){var i=d.event;i.target=i.target||i.srcElement;f.handleEvent.call(f,i)}:function(){var i=d.event;i.target=i.target||i.srcElement;f.call(h,i)};h.attachEvent("on"+g,h[g+f])}}}var c=function(){};if(a.removeEventListener){c=function(h,g,f){h.removeEventListener(g,f,false)}}else{if(a.detachEvent){c=function(i,g,f){i.detachEvent("on"+g,i[g+f]);try{delete i[g+f]}catch(h){i[g+f]=undefined}}}}var b={bind:e,unbind:c};if(typeof define==="function"&&define.amd){define(b)}else{d.eventie=b}})(this);
/*!
 * docReady
 * Cross browser DOMContentLoaded event emitter
 */
(function(d){var b=d.document;var a=[];function c(g){if(typeof g!=="function"){return}if(c.isReady){g()}else{a.push(g)}}c.isReady=false;function f(m){var l=m.type==="readystatechange"&&b.readyState!=="complete";if(c.isReady||l){return}c.isReady=true;for(var h=0,g=a.length;h<g;h++){var k=a[h];k()}}function e(g){g.bind(b,"DOMContentLoaded",f);g.bind(b,"readystatechange",f);g.bind(d,"load",f);return c}if(typeof define==="function"&&define.amd){define(["eventie"],e)}else{d.docReady=e(d.eventie)}})(this);(function(c){var b=document.defaultView;var a=b&&b.getComputedStyle?function(f){return b.getComputedStyle(f,null)}:function(f){return f.currentStyle};function e(g,f){for(var h in f){g[h]=f[h]}return g}function d(s,r,i){var q=i("transition");var n=i("transform");var o=q&&n;var l=!!i("perspective");var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[q];var k=["transform","transition","transitionDuration","transitionProperty"];var p=(function(){var u={};for(var v=0,t=k.length;v<t;v++){var x=k[v];var w=i(x);if(w&&w!==x){u[x]=w}}return u})();function h(t,u){if(!t){return}this.element=t;this.layout=u;this.position={x:0,y:0};this._create()}e(h.prototype,s.prototype);h.prototype._create=function(){this.css({position:"absolute"})};h.prototype.handleEvent=function(t){var u="on"+t.type;if(this[u]){this[u](t)}};h.prototype.getSize=function(){this.size=r(this.element)};h.prototype.css=function(v){var t=this.element.style;for(var w in v){var u=p[w]||w;t[u]=v[w]}};h.prototype.getPosition=function(){var w=a(this.element);var u=this.layout.options;var B=u.isOriginLeft;var A=u.isOriginTop;var t=parseInt(w[B?"left":"right"],10);var z=parseInt(w[A?"top":"bottom"],10);t=isNaN(t)?0:t;z=isNaN(z)?0:z;var v=this.layout.size;t-=B?v.paddingLeft:v.paddingRight;z-=A?v.paddingTop:v.paddingBottom;this.position.x=t;this.position.y=z};h.prototype.layoutPosition=function(){var u=this.layout.size;var t=this.layout.options;var v={};if(t.isOriginLeft){v.left=(this.position.x+u.paddingLeft)+"px";v.right=""}else{v.right=(this.position.x+u.paddingRight)+"px";v.left=""}if(t.isOriginTop){v.top=(this.position.y+u.paddingTop)+"px";v.bottom=""}else{v.bottom=(this.position.y+u.paddingBottom)+"px";v.top=""}this.css(v);this.emitEvent("layout",[this])};var g=l?function(t,u){return"translate3d("+t+"px, "+u+"px, 0)"}:function(t,u){return"translate("+t+"px, "+u+"px)"};h.prototype._transitionTo=function(E,D){this.getPosition();var u=this.position.x;var t=this.position.y;var C=parseInt(E,10);var B=parseInt(D,10);var A=C===this.position.x&&B===this.position.y;this.setPosition(E,D);if(A&&!this.isTransitioning){this.layoutPosition();return}var z=E-u;var w=D-t;var v={};var F=this.layout.options;z=F.isOriginLeft?z:-z;w=F.isOriginTop?w:-w;v.transform=g(z,w);this.transition({to:v,onTransitionEnd:this.layoutPosition,isCleaning:true})};h.prototype.goTo=function(t,u){this.setPosition(t,u);this.layoutPosition()};h.prototype.moveTo=o?h.prototype._transitionTo:h.prototype.goTo;h.prototype.setPosition=function(t,u){this.position.x=parseInt(t,10);this.position.y=parseInt(u,10)};h.prototype._nonTransition=function(t){this.css(t.to);if(t.isCleaning){this._removeStyles(t.to)}if(t.onTransitionEnd){t.onTransitionEnd.call(this)}};h.prototype._transition=function(v){var t=this.layout.options.transitionDuration;if(!parseFloat(t)){this._nonTransition(v);return}var y=v.to;var x=[];for(var z in y){x.push(z)}var u={};u.transitionProperty=x.join(",");u.transitionDuration=t;this.element.addEventListener(f,this,false);if(v.isCleaning||v.onTransitionEnd){this.on("transitionEnd",function(A){if(v.isCleaning){A._removeStyles(y)}if(v.onTransitionEnd){v.onTransitionEnd.call(A)}return true})}if(v.from){this.css(v.from);var w=this.element.offsetHeight;w=null}this.css(u);this.css(y);this.isTransitioning=true};h.prototype.transition=h.prototype[q?"_transition":"_nonTransition"];h.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)};h.prototype.onotransitionend=function(t){this.ontransitionend(t)};h.prototype.ontransitionend=function(t){if(t.target!==this.element){return}this.removeTransitionStyles();this.element.removeEventListener(f,this,false);this.isTransitioning=false;this.emitEvent("transitionEnd",[this])};h.prototype._removeStyles=function(u){var t={};for(var v in u){t[v]=""}this.css(t)};var m={transitionProperty:"",transitionDuration:""};h.prototype.removeTransitionStyles=function(){this.css(m)};h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};h.prototype.remove=q?function(){var t=this;this.on("transitionEnd",function(){t.removeElem();return true});this.hide()}:h.prototype.removeElem;h.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:true})};h.prototype.hide=function(){this.isHidden=true;this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:true,onTransitionEnd:function(){this.css({display:"none"})}})};h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return h}if(typeof define==="function"&&define.amd){define(["eventEmitter","get-size","get-style-property"],d)}else{c.Outlayer={};c.Outlayer.Item=d(c.EventEmitter,c.getSize,c.getStyleProperty)}})(window);
/*!
 * Outlayer v1.0.0
 * the brains and guts of a layout library
 */
(function(f){var i=f.document;var c=f.console;var o=f.jQuery;var n=function(){};function h(r,q){for(var s in q){r[s]=q[s]}return r}var p=Object.prototype.toString;function d(q){return p.call(q)==="[object Array]"}function a(t){var s=[];if(d(t)){s=t}else{if(typeof t.length==="number"){for(var r=0,q=t.length;r<q;r++){s.push(t[r])}}else{s.push(t)}}return s}var g=(typeof HTMLElement==="object")?function e(q){return q instanceof HTMLElement}:function b(q){return q&&typeof q==="object"&&q.nodeType===1&&typeof q.nodeName==="string"};var k=Array.prototype.indexOf?function(q,r){return q.indexOf(r)}:function(s,t){for(var r=0,q=s.length;r<q;r++){if(s[r]===t){return r}}return -1};function l(q){return q.replace(/(.)([A-Z])/g,function(s,r,t){return r+"-"+t}).toLowerCase()}function m(u,x,r,z,y,A,s){var v=0;var q={};function t(C,B){if(typeof C==="string"){C=i.querySelector(C)}if(!C||!g(C)){if(c){c.error("Bad "+this.settings.namespace+" element: "+C)}return}this.element=C;this.options=h({},this.options);h(this.options,B);var D=++v;this.element.outlayerGUID=D;q[D]=this;this._create();if(this.options.isInitLayout){this.layout()}}t.prototype.settings={namespace:"outlayer",item:s};t.prototype.options={containerStyle:{position:"relative"},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};h(t.prototype,z.prototype);t.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);h(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};t.prototype.reloadItems=function(){this.items=this._getItems(this.element.children)};t.prototype._getItems=function(D){var G=this._filterFindItemElements(D);var E=this.settings.item;var C=[];for(var F=0,B=G.length;F<B;F++){var I=G[F];var H=new E(I,this,this.options.itemOptions);C.push(H)}return C};t.prototype._filterFindItemElements=function(B){B=a(B);var C=this.options.itemSelector;if(!C){return B}var G=[];for(var F=0,H=B.length;F<H;F++){var D=B[F];if(A(D,C)){G.push(D)}var I=D.querySelectorAll(C);for(var E=0,J=I.length;E<J;E++){G.push(I[E])}}return G};t.prototype.getItemElements=function(){var C=[];for(var D=0,B=this.items.length;D<B;D++){C.push(this.items[D].element)}return C};t.prototype.layout=function(){this._resetLayout();this._manageStamps();var B=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,B);this._isLayoutInited=true};t.prototype._init=t.prototype.layout;t.prototype._resetLayout=function(){this.getSize()};t.prototype.getSize=function(){this.size=y(this.element)};t.prototype._getMeasurement=function(D,B){var C=this.options[D];var E;if(!C){this[D]=0}else{if(typeof C==="string"){E=this.element.querySelector(C)}else{if(g(C)){E=C}}this[D]=E?y(E)[B]:C}};t.prototype.layoutItems=function(B,C){B=this._getItemsForLayout(B);this._layoutItems(B,C);this._postLayout()};t.prototype._getItemsForLayout=function(C){var F=[];for(var D=0,B=C.length;D<B;D++){var E=C[D];if(!E.isIgnored){F.push(E)}}return F};t.prototype._layoutItems=function(E,I){if(!E||!E.length){this.emitEvent("layoutComplete",[this,E]);return}this._itemsOn(E,"layout",function H(){this.emitEvent("layoutComplete",[this,E])});var D=[];for(var F=0,C=E.length;F<C;F++){var G=E[F];var B=this._getItemLayoutPosition(G);B.item=G;B.isInstant=I;D.push(B)}this._processLayoutQueue(D)};t.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};t.prototype._processLayoutQueue=function(C){for(var D=0,B=C.length;D<B;D++){var E=C[D];this._positionItem(E.item,E.x,E.y,E.isInstant)}};t.prototype._positionItem=function(C,B,E,D){if(D){C.goTo(B,E)}else{C.moveTo(B,E)}};t.prototype._postLayout=function(){var B=this._getContainerSize();if(B){this._setContainerMeasure(B.width,true);this._setContainerMeasure(B.height,false)}};t.prototype._getContainerSize=n;t.prototype._setContainerMeasure=function(B,C){if(B===undefined){return}var D=this.size;if(D.isBorderBox){B+=C?D.paddingLeft+D.paddingRight+D.borderLeftWidth+D.borderRightWidth:D.paddingBottom+D.paddingTop+D.borderTopWidth+D.borderBottomWidth}B=Math.max(B,0);this.element.style[C?"width":"height"]=B+"px"};t.prototype._itemsOn=function(I,E,J){var B=0;var H=I.length;var G=this;function D(){B++;if(B===H){J.call(G)}return true}for(var C=0,F=I.length;C<F;C++){var K=I[C];K.on(E,D)}};t.prototype.ignore=function(C){var B=this.getItem(C);if(B){B.isIgnored=true}};t.prototype.unignore=function(C){var B=this.getItem(C);if(B){delete B.isIgnored}};t.prototype.stamp=function(C){C=this._find(C);if(!C){return}this.stamps=this.stamps.concat(C);for(var D=0,B=C.length;D<B;D++){var E=C[D];this.ignore(E)}};t.prototype.unstamp=function(C){C=this._find(C);if(!C){return}for(var E=0,B=C.length;E<B;E++){var F=C[E];var D=k(this.stamps,F);if(D!==-1){this.stamps.splice(D,1)}this.unignore(F)}};t.prototype._find=function(B){if(!B){return}if(typeof B==="string"){B=this.element.querySelectorAll(B)}B=a(B);return B};t.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();for(var D=0,B=this.stamps.length;D<B;D++){var C=this.stamps[D];this._manageStamp(C)}};t.prototype._getBoundingRect=function(){var B=this.element.getBoundingClientRect();var C=this.size;this._boundingRect={left:B.left+C.paddingLeft+C.borderLeftWidth,top:B.top+C.paddingTop+C.borderTopWidth,right:B.right-(C.paddingRight+C.borderRightWidth),bottom:B.bottom-(C.paddingBottom+C.borderBottomWidth)}};t.prototype._manageStamp=n;t.prototype._getElementOffset=function(E){var B=E.getBoundingClientRect();var D=this._boundingRect;var C=y(E);var F={left:B.left-D.left-C.marginLeft,top:B.top-D.top-C.marginTop,right:D.right-B.right-C.marginRight,bottom:D.bottom-B.bottom-C.marginBottom};return F};t.prototype.handleEvent=function(B){var C="on"+B.type;if(this[C]){this[C](B)}};t.prototype.bindResize=function(){if(this.isResizeBound){return}x.bind(f,"resize",this);this.isResizeBound=true};t.prototype.unbindResize=function(){x.unbind(f,"resize",this);this.isResizeBound=false};t.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var C=this;function B(){C.resize()}this.resizeTimeout=setTimeout(B,100)};t.prototype.resize=function(){var C=y(this.element);var B=this.size&&C;if(B&&C.innerWidth===this.size.innerWidth){return}this.layout();delete this.resizeTimeout};t.prototype.addItems=function(C){var B=this._getItems(C);if(!B.length){return}this.items=this.items.concat(B);return B};t.prototype.appended=function(C){var B=this.addItems(C);if(!B.length){return}this.layoutItems(B,true);this.reveal(B)};t.prototype.prepended=function(C){var B=this._getItems(C);if(!B.length){return}var D=this.items.slice(0);this.items=B.concat(D);this._resetLayout();this.layoutItems(B,true);this.reveal(B);this.layoutItems(D)};t.prototype.reveal=function(C){if(!C||!C.length){return}for(var D=0,B=C.length;D<B;D++){var E=C[D];E.reveal()}};t.prototype.hide=function(C){if(!C||!C.length){return}for(var D=0,B=C.length;D<B;D++){var E=C[D];E.hide()}};t.prototype.getItem=function(E){for(var C=0,B=this.items.length;C<B;C++){var D=this.items[C];if(D.element===E){return D}}};t.prototype.getItems=function(D){if(!D||!D.length){return}var C=[];for(var E=0,B=D.length;E<B;E++){var G=D[E];var F=this.getItem(G);if(F){C.push(F)}}return C};t.prototype.remove=function(C){C=a(C);var F=this.getItems(C);this._itemsOn(F,"remove",function(){this.emitEvent("removeComplete",[this,F])});for(var E=0,B=F.length;E<B;E++){var G=F[E];G.remove();var D=k(this.items,G);this.items.splice(D,1)}};t.prototype.destroy=function(){var D=this.element.style;D.height="";D.position="";D.width="";for(var C=0,B=this.items.length;C<B;C++){var E=this.items[C];E.destroy()}this.unbindResize();delete this.element.outlayerGUID};t.data=function(B){var C=B&&B.outlayerGUID;return C&&q[C]};function w(C,B){C.prototype[B]=h({},t.prototype[B])}t.create=function(E,C){function D(){t.apply(this,arguments)}h(D.prototype,t.prototype);w(D,"options");w(D,"settings");h(D.prototype.options,C);D.prototype.settings.namespace=E;D.data=t.data;D.Item=function B(){s.apply(this,arguments)};D.Item.prototype=new s();D.prototype.settings.item=D.Item;r(function(){var L=l(E);var F=i.querySelectorAll(".js-"+L);var M="data-"+L+"-options";for(var H=0,I=F.length;H<I;H++){var G=F[H];var J=G.getAttribute(M);var O;try{O=J&&JSON.parse(J)}catch(K){if(c){c.error("Error parsing "+M+" on "+G.nodeName.toLowerCase()+(G.id?"#"+G.id:"")+": "+K)}continue}var N=new D(G,O);if(o){o.data(G,E,N)}}});if(o&&o.bridget){o.bridget(E,D)}return D};t.Item=s;return t}if(typeof define==="function"&&define.amd){define(["classie","eventie","doc-ready","eventEmitter","get-size","matches-selector","outlayer/item"],m)}else{f.Outlayer=m(f.classie,f.eventie,f.docReady,f.EventEmitter,f.getSize,f.matchesSelector,f.Outlayer.Item)}})(window);
/*!
 * Masonry v3.0.3
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(c){var b=Array.prototype.indexOf?function(d,e){return d.indexOf(e)}:function(e,h){for(var f=0,d=e.length;f<d;f++){var g=e[f];if(g===h){return f}}return -1};function a(e,f){var d=e.create("masonry");d.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var g=this.cols;this.colYs=[];while(g--){this.colYs.push(0)}this.maxY=0};d.prototype.measureColumns=function(){var g=this._getSizingContainer();var i=this.items[0];var h=i&&i.element;if(!this.columnWidth){this.columnWidth=h?f(h).outerWidth:this.size.innerWidth}this.columnWidth+=this.gutter;this._containerWidth=f(g).innerWidth;this.cols=Math.floor((this._containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};d.prototype._getSizingContainer=function(){return this.options.isFitWidth?this.element.parentNode:this.element};d.prototype._getItemLayoutPosition=function(q){q.getSize();var n=Math.ceil(q.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);var g=this._getColGroup(n);var h=Math.min.apply(Math,g);var o=b(g,h);var m={x:this.columnWidth*o,y:h};var p=h+q.size.outerHeight;var k=this.cols+1-g.length;for(var l=0;l<k;l++){this.colYs[o+l]=p}return m};d.prototype._getColGroup=function(k){if(k===1){return this.colYs}var l=[];var m=this.cols+1-k;for(var g=0;g<m;g++){var h=this.colYs.slice(g,g+k);l[g]=Math.max.apply(Math,h)}return l};d.prototype._manageStamp=function(g){var o=f(g);var m=this._getElementOffset(g);var l=this.options.isOriginLeft?m.left:m.right;var h=l+o.outerWidth;var q=Math.floor(l/this.columnWidth);q=Math.max(0,q);var k=Math.floor(h/this.columnWidth);k=Math.min(this.cols-1,k);var p=(this.options.isOriginTop?m.top:m.bottom)+o.outerHeight;for(var n=q;n<=k;n++){this.colYs[n]=Math.max(p,this.colYs[n])}};d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var g={height:this.maxY};if(this.options.isFitWidth){g.width=this._getContainerFitWidth()}return g};d.prototype._getContainerFitWidth=function(){var h=0;var g=this.cols;while(--g){if(this.colYs[g]!==0){break}h++}return(this.cols-h)*this.columnWidth-this.gutter};d.prototype.resize=function(){var g=this._getSizingContainer();var i=f(g);var h=this.size&&i;if(h&&i.innerWidth===this._containerWidth){return}this.layout();delete this.resizeTimeout};return d}if(typeof define==="function"&&define.amd){define(["outlayer","get-size"],a)}else{c.Masonry=a(c.Outlayer,c.getSize)}})(window);(function(h){function b(){return document[!f?"fullScreen":"webkit"===f?"webkitIsFullScreen":f+"FullScreen"]}function d(){return document[f?f+"CancelFullScreen":"cancelFullScreen"]()}var a=typeof document.cancelFullScreen!=="undefined",g=["webkit","moz","o","ms","khtml"],f="",e=function(){},c;if(!a){for(c=0;f=g[c];c++){if(typeof document[f+"CancelFullScreen"]!=="undefined"){a=true;break}}}if(a){h.fn.requestFullScreen=function(){return this.each(function(){return this[f?f+"RequestFullScreen":"requestFullScreen"]()})};h.fn.fullScreenChange=function(l){var i=[f+"fullscreenchange"].concat([].slice.call(arguments,0)),k=h(this);return k.bind.apply(k,i)};h.FullScreen={isFullScreen:b,cancelFullScreen:d}}else{h.fn.requestFullScreen=h.fn.fullScreenChange=e;h.FullScreen={isFullScreen:function(){return false},cancelFullScreen:e}}})(jQuery);pkrss.cls.newstype_newspaper_masonry=function(){pkrss.cls.newstype_module_base.call(this);this.name="newspaper";this.text="Newspaper";this.actived=false;this.model=null;this.container=null;this.msnry=null};pkrss.cls.newstype_newspaper_masonry.prototype.init=function(b,a){if(this.model){return}this.model=b;this.container=a;this.desceffect=new pkrss.cls.newstype_newspaper_masonry_descriptioneffect(this);this.descpicmode=new pkrss.cls.newstype_newspaper_masonry_picmode(this);var d=pkrss.ajax.pkurlresurlpath;var c=[{ns:"jQuery.fn.requestFullScreen",src:d+"js/third/jquery-fullscreen/jquery.fullscreen.js"},{ns:"Masonry",src:d+"js/third/jquery-masonry/jquery.masonry.all.js",depends:["jQuery.fn.media","jQuery.fn.requestFullScreen"]}];pkrss.utils.html.loadPlateformJs(c,function(){pkrss.model.newstype.newspaper.masonry.init2()})};pkrss.cls.newstype_newspaper_masonry.prototype.init2=function(b,a){this.msnry=new Masonry(this.container[0],{itemSelector:".box",columnWidth:100});pkrss.model.newstype.module.addmodule(this);pkrss.model.newstype.module.changemodule(this.name)};pkrss.cls.newstype_newspaper_masonry.prototype.onCatalogTableChanged=function(){pkrss.model.newstype.newspaper.masonry.loadrssitem(false)};pkrss.cls.newstype_newspaper_masonry.prototype.onActive=function(){this.actived=true;pkrss.ui.showLoading();this.desceffect.control.show();this.descpicmode.control.show();this.loadrssitem(false);pkrss.event.bind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_masonry.prototype.onDeactive=function(){this.actived=false;this.container.empty();this.msnry.layout();this.desceffect.control.hide();this.descpicmode.control.hide();pkrss.event.unbind(pkrss.model.event.tableChanged,this.onCatalogTableChanged)};pkrss.cls.newstype_newspaper_masonry.prototype.loadrssitem=function(a){if(!this.actived){return}if(!a){this.container.empty();this.msnry.layout()}this.model.loadPageData(function(b){if(pkrss.model.newstype.newspaper.masonry.actived){pkrss.model.newstype.newspaper.masonry.onHandle(b)}},!a,this.descpicmode.controlval)};pkrss.cls.newstype_newspaper_masonry.prototype.changeDescType=function(a){this.loadrssitem(false)};pkrss.cls.newstype_newspaper_masonry.prototype.onHandle=function(t){if(t&&t.length){var c="",o,h,p,i,r;var m=this.desceffect.controlval;var l,u;for(var g in t){o=t[g];h=o.cid?o.cid:0;p=o.tid?o.tid:0;u=pkrss.utils.html.replaceHtmlTags(o.title);i=3;c+='<div class="box pk_item_need_transparent col'+i+'" data-iid="'+o.id+'">';c+="<p class='rss_title'><a href='"+o.link+"' target='_blank' id='rss_desc_"+o.id+"' title='"+u+"'>"+u+"</a></p>";l="";if(m!="none"){c+="<p class='text_oneline text_meta rss_author'>";if(o.catalogname){c+="<a href='#' onclick='return pkrss.modelview.catalog.changeRssTable("+h+",0);'>";r=pkrss.model.catalog.getnavinfo(h);c+="<img width='16px' height='16px' src='"+pkrss.ajax.pkurlresurlpath+"../images/catalog/"+(r?r.key:"rss")+".png' />";c+=o.catalogname;c+="</a>&nbsp-&nbsp"}var s="";if(o.tablename){s=o.tablename}else{if(o.src){s=o.src}else{s=o.author}}if(s&&(s!="")){c+="<a href='#' onclick='return pkrss.modelview.catalog.changeRssTable("+h+","+p+")'>";c+="<img width='16px' height='16px' src='"+o.link.substring(0,o.link.indexOf("/",9))+"/favicon.ico' alt='rss logo' />";c+=s;c+="</a>"}c+=" </p>";if(m!="origin"){if(o.img&&o.img.length){c+="<div>";for(var q in o.img){var v=o.img[q];c+="<img src='"+v.url;c+="' width='"+v.width+"px' height='"+v.height+"px'";c+=" />"}c+="</div>"}}c+='<div class="rss_desc">';if(m!="origin"){l=this.desceffect.trunkworkerdesc(pkrss.utils.html.replaceHtmlTags(o.description).replace("</",""),u);if(o.media&&o.media.length){for(var k in o.media){var e=o.media[k];var a=e.type;var d=a.lastIndexOf("/");if(d>=0){a=a.substr(d+1)}d=a.lastIndexOf("-");if(d>=0){a=a.substr(d+1)}a=a.toUpperCase();l+='<a class="rss_desc_mediaspan" href="'+e.url+'" onclick="return pkrss.model.newstype.newspaper.masonry.onMediaHrefClick(this,'+e.width+","+e.height+",'"+u.replace("'","\\'").replace('"','\\"')+"','"+e.type+'\')" target="_blank">'+a+"</a>"}}}else{l=pkrss.utils.html.replaceHtmlTags(o.description)}c+=l;c+="</div>"}c+='<p class="rss_bottom';if(l){c+=" pk_bordertop"}c+='"><span>'+o.pubDate+"&nbsp;&nbsp;";c+="</span>";c+="</p></div>"}if(t.aditems){c+=t.aditems.join("")}var f=pkrss.q(c);pkrss.event.trigger(pkrss.model.event.newsItemAppend,f);this.container.append(f);this.msnry.appended(f);this.msnry.layout();var b=pkrss.q(window);if((b.scrollTop()+pkrss.q(document).height()==b.height())){var n=this;setTimeout(function(){n.loadrssitem(true);n=null},1000)}}else{}};pkrss.fn.masonry_resize_fixed=function(){var a=pkrss.q(window);if(a.width()<360){pkrss.q("#container").css("margin-left","0px")}else{pkrss.ui.centerHorzShow("#container",300)}};(function(){pkrss.q(window).bind("resize",pkrss.fn.masonry_resize_fixed);pkrss.fn.masonry_resize_fixed()})();pkrss.cls.newstype_newspaper_masonry_descriptioneffect=function(a){this.desc_max_len=256;this.model=a;this.control=null;this.controlval="brief";this.init()};pkrss.cls.newstype_newspaper_masonry_descriptioneffect.prototype.init=function(){var b='<li><select id="navitem_rssMasonryControl">	<option value="brief"> '+pkgetLocaleString("Brief")+' </option>	<option value="origin"> '+pkgetLocaleString("Origin")+' </option>	<option value="none"> '+pkgetLocaleString("None")+" </option>	</select></li>";pkrss.q(b).insertBefore(pkrss.q("#navitem_rssCatalog"));this.control=pkrss.q("#navitem_rssMasonryControl");var a=this;this.control.change(function(){var c=pkrss.q(this).val();if(c==a.controlval){return}a.controlval=c;a.model.changeDescType(c)})};pkrss.cls.newstype_newspaper_masonry_descriptioneffect.prototype.trunkworkerdesc=function(d,c){d=d.replace("'","'");var b;var a=this.desc_max_len;if(d.length>a){b=d.substring(0,a);b+='<a href="#" onclick="return pkrss.model.newstype.newspaper.masonry.desceffect.onMoreDescriptionClick(this);" data-text="'+d+'" data-title="'+c+'" title="'+d.substring(a,100)+'">...</a>'}else{b=d}return b};pkrss.cls.newstype_newspaper_masonry_descriptioneffect.prototype.onMoreDescriptionClick=function(a){pkrss.ui._loadimpromptu(function(){var b=pkrss.q(a);jQuery.prompt(b.data("text"),{title:b.data("title")})});return false};pkrss.cls.newstype_newspaper_masonry_picmode=function(a){this.model=a;this.control=null;this.controlval="1";this.init()};pkrss.cls.newstype_newspaper_masonry_picmode.prototype.init=function(){var b='<li><select id="navitem_rssMasonryPicmode">	<option value="1"> '+pkgetLocaleString("Normal")+' </option>	<option value="3"> '+pkgetLocaleString("Picture")+' </option>	<option value="456"> '+pkgetLocaleString("Media")+" </option>	</select></li><li> | </li>";pkrss.q(b).insertBefore(pkrss.q("#navitem_rssCatalog"));this.control=pkrss.q("#navitem_rssMasonryPicmode");var a=this;this.control.change(function(){var c=pkrss.q(this).val();if(c==a.controlval){return}a.controlval=c;a.model.loadrssitem(false)})};pkrss.cls.newstype_newspaper_masonry.prototype._player_jplayer=function(c,b,a,d){};pkrss.cls.newstype_newspaper_masonry.prototype.onMediaHrefClick=function(f,e,a,g,d){var c=pkrss.q(f).prop("href");var b=this;pkrss.ui._loadimpromptu(function(){b._onMediaHrefClick2(c,e,a,g,d)});return false};pkrss.cls.newstype_newspaper_masonry.prototype._onMediaHrefClick2=function(a,c,h,g,f){var b="_pk_tmp_"+pkrss.uniqueid();if(!c){c="240"}if(!h){h="320"}var i;var d;if(true||a.substring(a.length-4)==".mp3"){i='<div style="height:240px"><div id="'+b+'" allowFullScreen="true" style="width:100%;height:100%;min-height:240px;"><object class="pkmedia" data="'+a+'" type="'+f+'" /><param name="src" value="'+a+'"><param name="bgColor" value="#ffffff"><param name="autoplay" value="false"></div></div>';d="embed"}else{i='<a id="'+b+'" class="pkmedia {width:\''+c+"', height:'"+h+'\'}" href="'+a+'"></a>';d="jmedia"}a=null;var e={};e[pkgetLocaleString("Full screen")]=2;e[pkgetLocaleString("Close")]=0;if(!g){g=pkgetLocaleString("Media")}jQuery.prompt(i,{title:g,buttons:e,submit:function(o,l,k,n){if(l==2){o.preventDefault();pkrss.q("#"+b).requestFullScreen()}else{if(d=="jplayer"){pkrss.q("#jquery_jplayer_"+b).jPlayer("stop")}d=null;b=null}}});if(d=="jmedia"){pkrss.q("#"+b).media()}};pkrss.define("pkrss.model.newstype.newspaper",{masonry:new pkrss.cls.newstype_newspaper_masonry()});pkrss.cls.rightpanel=function(){this.items=[{name:"onoff",title:"Open/Off",ns:"pkrss.modelview.rightpanel.onoff",js:pkrss.ajax.pkurlresurlpath+"js/newspaper/modelview/rightpanel_onoff.js"},{name:"tool",title:"Tool Plugin",ns:"pkrss.modelview.rightpanel.tools",js:pkrss.ajax.pkurlresurlpath+"js/newspaper/modelview/rightpanel_tools.js"},{name:"imgplugin",title:"Change UI",ns:"pkrss.modelview.rightpanel.picimg",js:pkrss.ajax.pkurlresurlpath+"js/newspaper/modelview/rightpanel_picimg.js"}];this.init(pkrss.rootSelector)};pkrss.cls.rightpanel.prototype.init=function(c){if(!c){c="body"}var b='<div id="tool_right_pane_container"><ul id="tool_right_pane">';var d;for(var a in this.items){d=this.items[a];b+='<li class="pkhalftransparent"><a href="javascript:;" onclick="return pkrss.modelview.rightpanel.onRightPanelClick(this,\''+d.name+'\')" id="tool_right_pane_item_'+d.name+'" class="pkico pkico-'+d.name+' tool_right_pane_item_btn" title="'+pkgetLocaleString(d.title)+'"><span style="right:40px;"></span></a></li>'}b+="</ul></div>";pkrss.q(c).append(b)};pkrss.cls.rightpanel.prototype.append=function(a,b){if(b){pkrss.q("#tool_right_pane").prepend(a)}else{pkrss.q("#tool_right_pane").append(a)}};pkrss.cls.rightpanel.prototype.onRightPanelClick=function(b,a){this.loaditem(b,a);return false};pkrss.cls.rightpanel.prototype.loaditem=function(f,b,a){f=pkrss.q(f);var d=f.parent();if(d.hasClass("pkhalftransparent")){d.removeClass("pkhalftransparent");f.prop("onclick","return false");var e;for(var c in this.items){e=this.items[c];if(e.name==b){if(e.js){pkrss.utils.html.loadPlateformJs([{ns:e.ns,src:e.js}],a)}break}}return true}else{if(a){a(true)}}return false};pkrss.cls.rightpanel.prototype.floatpanel=function(e,g,a,f){var d="pkrss.cls.floatpanel";var b=pkrss.getObjFromNamespace(d);if(b){var c=new b(e,g,a);if(!f){c.onHoverLeave(true)}}else{pkrss.utils.html.loadPlateformJs([{ns:d,src:pkrss.ajax.pkurlresurlpath+"js/modelview/floatpanel.js"}],function(i){if(!i){return}var h=new pkrss.cls.floatpanel(e,g,a);if(!f){h.onHoverLeave(true)}shownow=null;g=null;e=null;a=null})}};pkrss.cls.rightpanel.prototype.switchComponentContentType=function(a){this.loaditem(pkrss.q("#tool_right_pane_item_onoff"),"onoff",function(b){if(!b){return}var c=pkrss.getObjFromNamespace("pkrss.controller.header");if(c){c.switchComponentContentType(a);a=null}else{pkrss.modelview.rightpanel.onoff.onItemClick("header",pkrss.q("#tool_right_pane_item_header"),function(d){if(!d){return}pkrss.controller.header.switchComponentContentType(a);a=null})}})};pkrss.define("pkrss.modelview",{rightpanel:new pkrss.cls.rightpanel()});pkrss.cls.rightpanel_vscroll=function(){this.DnClickStatus=false;this.win=pkrss.q(window);this.doc=pkrss.q(document);this.body=pkrss.q("html,body");this.init()};pkrss.cls.rightpanel_vscroll.prototype.init=function(){var a=this;var b='<li class="pkhide" id="tool_right_pane_item_uparrow"><a href="#" onclick="return pkrss.modelview.rightpanel.vscroll.onUpClick()" class="pkico pkico-uparrow tool_right_pane_item_btn" title="'+pkgetLocaleString("To top")+'"><span style="right:40px;"></span></a></li>';pkrss.modelview.rightpanel.append(b,true);b='<li><a href="#" id="tool_right_pane_item_dnarrow" onclick="return pkrss.modelview.rightpanel.vscroll.onDnClick()" class="pkico pkico-downarrow tool_right_pane_item_btn pkhalftransparent" title="'+pkgetLocaleString("Scroll to bottom")+'"><span style="right:40px;"></span></a></li>';pkrss.modelview.rightpanel.append(b);pkrss.q(window).scroll(function(){a.onScroll()})};pkrss.cls.rightpanel_vscroll.prototype.onScroll=function(){var b=this.win.scrollTop();var a=this.doc.height();var c=this.win.height();if(b==0){pkrss.q("#tool_right_pane_item_uparrow").addClass("pkhide")}else{pkrss.q("#tool_right_pane_item_uparrow").removeClass("pkhide")}if((b>0)&&(b==a-c)){pkrss.model.newstype.module.loadrssitem(true)}};pkrss.cls.rightpanel_vscroll.prototype.onUpClick=function(){var a=this.win.scrollTop()+1000;this.body.animate({scrollTop:0},a/1000);if(this.DnClickStatus){pkrss.q("#tool_right_pane_item_dnarrow").addClass("pkhalftransparent")}this.DnClickStatus=false;return false};pkrss.cls.rightpanel_vscroll.prototype.onDnClick=function(){if(this.DnClickStatus){this.DnClickStatus=false;pkrss.q("#tool_right_pane_item_dnarrow").addClass("pkhalftransparent");return false}this.DnClickStatus=true;pkrss.q("#tool_right_pane_item_dnarrow").removeClass("pkhalftransparent");var a=this;pkrss.timer.interval2(1000,-1,function(){if(a.DnClickStatus){a.onDnClickInterval()}return !a.DnClickStatus},function(){a=null});return false};pkrss.cls.rightpanel_vscroll.prototype.onDnClickInterval=function(){var b=this.body.height,a=this.win.height;var c=this.win.scrollTop();if(c+a>=b){return}this.body.animate({scrollTop:c+20},1000)};pkrss.define("pkrss.modelview.rightpanel",{vscroll:new pkrss.cls.rightpanel_vscroll()});function apClient(){}apClient.prototype.start=function(a){setTimeout(pkrss.client.newspaper.onDocumentReady,1000)};apClient.prototype.isInitOk=function(){return true};apClient.prototype.onDeviceReady=function(){console.log("mobileevent:deviceready");if(!document.addEventListener){return}document.addEventListener("backbutton",function(a){console.log("mobileevent: tts backbutton");a.preventDefault();if(pkrss.model&&pkrss.model.tts){pkrss.model.tts.stop()}navigator.app.exitApp()},false)};apClient.prototype.onDocumentReady=function(){if(pkrss.ui){pkrss.ui.showLoading()}pkrss.client.newspaper.initPlateformJs(function(a){var b={selectedLId:2,selectedCId:0,selectedTId:0,selectedIId:0,cleanMode:true};pkrss.profile.init(b,pkrss.plateform.runtime.aptype_pknews);new pkrss.timer.interval2(200,30,function(){return pkrss.client.newspaper.isInitOk()},function(c){pkrss.client.newspaper.initPageEvent();if(pkrss.ui){pkrss.ui.hideLoading()}})});pkrss.client.newspaper.onDeviceReady();pkrss.q("input[type=text]").attr("x-webkit-speech","x-webkit-speech")};apClient.prototype.initPlateformJs=function(a){var b=[];var c=pkrss.ajax.pkurlresurlpath;if(pkrss.plateform.isPhonegap){b.push({ns:"cordova",src:c+"js/third/phonegap/cordova.js"});b.push({ns:"pkrss.utils.tts",src:c+"js/utils/tts.js",depends:["cordova"]});b.push({ns:"pkrss.utils.tts.phonegap",src:c+"js/utils/tts/phonegap.js",depends:["pkrss.utils.tts"]})}else{if(pkrss.plateform.isWP8){b.push({ns:"cordova",src:c+"js/third/phonegap/wp8/cordova.js"});b.push({ns:"pkrss.utils.tts",src:c+"js/third/tts.js",depends:["cordova"]});b.push({ns:"pkrss.utils.tts.wp8",src:c+"js/utils/tts/wp8.js",depends:["pkrss.utils.tts"]})}else{if(pkrss.plateform.isWP7){b.push({ns:"cordova",src:c+"js/third/phonegap/wp7/cordova.js"});b.push({ns:"pkrss.utils.tts",src:c+"js/third/tts.js",depends:["cordova"]})}}}b.push({ns:"pkrss.model.newstype.newspaper.masonry",src:c+"js/newspaper/modelview/newstype_newspaper_masonry.js"});pkrss.utils.html.loadPlateformJs(b,a)};apClient.prototype.initPageEvent=function(){var a=pkrss.model.rssitem;pkrss.model.newstype.module.init();pkrss.modelview.locale.init("#pk_ul_locale",function(b){pkrss.utils.language.start({currentUILanguage:pkrss.profile.usersetting.uilang},function(){pkrss.modelview.catalog.init("#navitem_rssCatalog","#navitem_rssTable",function(){pkrss.model.newstype.newspaper.masonry.init(a,pkrss.q("#container"));var c=[];c.push({ns:"pkrss.modelview.rightpanel",src:pkrss.ajax.pkurlresurlpath+"js/newspaper/modelview/rightpanel.js"});pkrss.utils.html.loadPlateformJs(c,function(d){if(!d){return}setTimeout(function(){pkrss.utils.html.loadPlateformJs([{ns:"pkrss.modelview.rightpanel.vscroll",src:pkrss.ajax.pkurlresurlpath+"js/newspaper/modelview/rightpanel_vscroll.js"}]);pkrss.client.newspaper.onInited()},3000)})})})})};apClient.prototype.onInited=function(){pkrss.utils.html.addJavascriptFileOrig("http://cdn.pkrss.com/s/min/js/newspaper/controller/pk.ext.js",true)};pkrss.define("pkrss.client",{newspaper:new apClient()});(function(){pkrss.q(document).ready(pkrss.client.newspaper.start,false)})();