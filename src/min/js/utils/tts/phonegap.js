(function(){if(!window.plugins||!window.plugins.tts){console.log("speaktts_phonegap.init failed");return}function b(){var t="Local";var e,q,m,k;var s=false;var c;function l(){return s}function o(){c=pkrss.utils.tts;console.log("speaktts_phonegap.init()");e=window.plugins.tts;s=true;var u=this;e.startup(function(v){console.log("speaktts_phonegap tts.startup result: "+v);if(v==TTS.STARTED){f()}},function(v){s=false;c.removeengine(u.name);console.log("Error = "+v)})}function f(u){if(!l()){u(null,t);return false}if(!q){q=[];pkrss.model.locale.init(false,function(x){var v=[true];if(x&&x.length){for(var w in x){v.push(x[w].locale)}}if(!e.getLanguageList(v,function(y){q=y;if(u){u(q,t)}},function(y){if(u){u(q,t)}})){if(u){u(q,t)}}})}else{if(u){u(q,t)}}return true}function d(u){m=u}function g(w){if(!l()){return false}if(!q){return false}var v=pkrss.model.locale.getlocaleinfobyid(pkrss.model.locale.curlocaleid());if(!v){return false}if(k!=v.locale){for(var u in q){if(q[u].locale==c._filterLocaleString(v.locale)){k=pkrss.profile.usersetting.locale;if(!m){if(q[u].tts.length){m=q[u].tts[0].id}}if(m){}break}}}return h(w)}function h(u){e.speak(u,function(){c.onend()});return true}function n(){e.stop();c.onend()}function i(u){if(!l()){return false}e.mute(u,function(){});return true}function p(u){if(!l()){return false}e.volume(u,function(){});return true}function j(u){console.log(u)}function r(u){console.log("Error = "+u)}return{name:t,init:o,getTTSList:f,setCurrentTTS:d,speak:g,stop:n,mute:i,volume:p}}var a=new pkrss.utils.tts.base();pkrss.extend(a,new b());pkrss.utils.tts.factory.regist(a,true);pkrss.define("pkrss.utils.tts",{phonegap:a})})();