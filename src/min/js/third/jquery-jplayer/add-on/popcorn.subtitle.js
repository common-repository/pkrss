(function(a){var b=0,c=function(e,i){var d=e.container=document.createElement("div"),f=d.style,h=e.media;var g=function(){var j=e.position();f.fontSize="18px";f.width=h.offsetWidth+"px";f.top=j.top+h.offsetHeight-d.offsetHeight-40+"px";f.left=j.left+"px";setTimeout(g,10)};d.id=i||a.guid();f.position="absolute";f.color="white";f.textShadow="black 2px 2px 6px";f.fontWeight="bold";f.textAlign="center";g();e.media.parentNode.appendChild(d);return d};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var e=document.createElement("div");e.id="subtitle-"+b++;e.style.display="none";(!this.container&&(!d.target||d.target==="subtitle-container"))&&c(this);if(d.target&&d.target!=="subtitle-container"){d.container=document.getElementById(d.target)||c(this,d.target)}else{d.container=this.container}document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(e);d.innerContainer=e;d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||""}},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text)},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);