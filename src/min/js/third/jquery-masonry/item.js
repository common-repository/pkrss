(function(c){var b=document.defaultView;var a=b&&b.getComputedStyle?function(f){return b.getComputedStyle(f,null)}:function(f){return f.currentStyle};function e(g,f){for(var h in f){g[h]=f[h]}return g}function d(r,q,i){var p=i("transition");var m=i("transform");var n=p&&m;var k=!!i("perspective");var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[p];var j=["transform","transition","transitionDuration","transitionProperty"];var o=(function(){var t={};for(var u=0,s=j.length;u<s;u++){var w=j[u];var v=i(w);if(v&&v!==w){t[w]=v}}return t})();function h(s,t){if(!s){return}this.element=s;this.layout=t;this.position={x:0,y:0};this._create()}e(h.prototype,r.prototype);h.prototype._create=function(){this.css({position:"absolute"})};h.prototype.handleEvent=function(s){var t="on"+s.type;if(this[t]){this[t](s)}};h.prototype.getSize=function(){this.size=q(this.element)};h.prototype.css=function(u){var s=this.element.style;for(var v in u){var t=o[v]||v;s[t]=u[v]}};h.prototype.getPosition=function(){var v=a(this.element);var t=this.layout.options;var A=t.isOriginLeft;var z=t.isOriginTop;var s=parseInt(v[A?"left":"right"],10);var w=parseInt(v[z?"top":"bottom"],10);s=isNaN(s)?0:s;w=isNaN(w)?0:w;var u=this.layout.size;s-=A?u.paddingLeft:u.paddingRight;w-=z?u.paddingTop:u.paddingBottom;this.position.x=s;this.position.y=w};h.prototype.layoutPosition=function(){var t=this.layout.size;var s=this.layout.options;var u={};if(s.isOriginLeft){u.left=(this.position.x+t.paddingLeft)+"px";u.right=""}else{u.right=(this.position.x+t.paddingRight)+"px";u.left=""}if(s.isOriginTop){u.top=(this.position.y+t.paddingTop)+"px";u.bottom=""}else{u.bottom=(this.position.y+t.paddingBottom)+"px";u.top=""}this.css(u);this.emitEvent("layout",[this])};var g=k?function(s,t){return"translate3d("+s+"px, "+t+"px, 0)"}:function(s,t){return"translate("+s+"px, "+t+"px)"};h.prototype._transitionTo=function(D,C){this.getPosition();var t=this.position.x;var s=this.position.y;var B=parseInt(D,10);var A=parseInt(C,10);var z=B===this.position.x&&A===this.position.y;this.setPosition(D,C);if(z&&!this.isTransitioning){this.layoutPosition();return}var w=D-t;var v=C-s;var u={};var E=this.layout.options;w=E.isOriginLeft?w:-w;v=E.isOriginTop?v:-v;u.transform=g(w,v);this.transition({to:u,onTransitionEnd:this.layoutPosition,isCleaning:true})};h.prototype.goTo=function(s,t){this.setPosition(s,t);this.layoutPosition()};h.prototype.moveTo=n?h.prototype._transitionTo:h.prototype.goTo;h.prototype.setPosition=function(s,t){this.position.x=parseInt(s,10);this.position.y=parseInt(t,10)};h.prototype._nonTransition=function(s){this.css(s.to);if(s.isCleaning){this._removeStyles(s.to)}if(s.onTransitionEnd){s.onTransitionEnd.call(this)}};h.prototype._transition=function(u){var s=this.layout.options.transitionDuration;if(!parseFloat(s)){this._nonTransition(u);return}var x=u.to;var w=[];for(var y in x){w.push(y)}var t={};t.transitionProperty=w.join(",");t.transitionDuration=s;this.element.addEventListener(f,this,false);if(u.isCleaning||u.onTransitionEnd){this.on("transitionEnd",function(z){if(u.isCleaning){z._removeStyles(x)}if(u.onTransitionEnd){u.onTransitionEnd.call(z)}return true})}if(u.from){this.css(u.from);var v=this.element.offsetHeight;v=null}this.css(t);this.css(x);this.isTransitioning=true};h.prototype.transition=h.prototype[p?"_transition":"_nonTransition"];h.prototype.onwebkitTransitionEnd=function(s){this.ontransitionend(s)};h.prototype.onotransitionend=function(s){this.ontransitionend(s)};h.prototype.ontransitionend=function(s){if(s.target!==this.element){return}this.removeTransitionStyles();this.element.removeEventListener(f,this,false);this.isTransitioning=false;this.emitEvent("transitionEnd",[this])};h.prototype._removeStyles=function(t){var s={};for(var u in t){s[u]=""}this.css(s)};var l={transitionProperty:"",transitionDuration:""};h.prototype.removeTransitionStyles=function(){this.css(l)};h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};h.prototype.remove=p?function(){var s=this;this.on("transitionEnd",function(){s.removeElem();return true});this.hide()}:h.prototype.removeElem;h.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var s=this.layout.options;this.transition({from:s.hiddenStyle,to:s.visibleStyle,isCleaning:true})};h.prototype.hide=function(){this.isHidden=true;this.css({display:""});var s=this.layout.options;this.transition({from:s.visibleStyle,to:s.hiddenStyle,isCleaning:true,onTransitionEnd:function(){this.css({display:"none"})}})};h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return h}if(typeof define==="function"&&define.amd){define(["eventEmitter","get-size","get-style-property"],d)}else{c.Outlayer={};c.Outlayer.Item=d(c.EventEmitter,c.getSize,c.getStyleProperty)}})(window);