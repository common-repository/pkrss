THREE.CSS3DObject=function(a){THREE.Object3D.call(this);this.element=a;this.element.style.position="absolute";this.element.style.WebkitTransformStyle="preserve-3d";this.element.style.MozTransformStyle="preserve-3d";this.element.style.oTransformStyle="preserve-3d";this.element.style.transformStyle="preserve-3d"};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DSprite=function(a){THREE.CSS3DObject.call(this,a)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);THREE.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",THREE.REVISION);var a,d;var h,g;var e=new THREE.Projector();var c=new THREE.Matrix4();this.domElement=document.createElement("div");this.domElement.style.overflow="hidden";this.domElement.style.WebkitTransformStyle="preserve-3d";this.domElement.style.WebkitPerspectiveOrigin="50% 50%";this.domElement.style.MozTransformStyle="preserve-3d";this.domElement.style.MozPerspectiveOrigin="50% 50%";this.domElement.style.oTransformStyle="preserve-3d";this.domElement.style.oPerspectiveOrigin="50% 50%";this.domElement.style.transformStyle="preserve-3d";this.domElement.style.perspectiveOrigin="50% 50%";this.cameraElement=document.createElement("div");this.cameraElement.style.WebkitTransformStyle="preserve-3d";this.cameraElement.style.MozTransformStyle="preserve-3d";this.cameraElement.style.oTransformStyle="preserve-3d";this.cameraElement.style.transformStyle="preserve-3d";this.domElement.appendChild(this.cameraElement);this.setSize=function(k,j){a=k;d=j;h=a/2;g=d/2;this.domElement.style.width=k+"px";this.domElement.style.height=j+"px";this.cameraElement.style.width=k+"px";this.cameraElement.style.height=j+"px"};var i=function(j){return Math.abs(j)<0.000001?0:j};var f=function(j){var k=j.elements;return"matrix3d("+i(k[0])+","+i(-k[1])+","+i(k[2])+","+i(k[3])+","+i(k[4])+","+i(-k[5])+","+i(k[6])+","+i(k[7])+","+i(k[8])+","+i(-k[9])+","+i(k[10])+","+i(k[11])+","+i(k[12])+","+i(-k[13])+","+i(k[14])+","+i(k[15])+")"};var b=function(j){var k=j.elements;return"translate3d(-50%,-50%,0) matrix3d("+i(k[0])+","+i(k[1])+","+i(k[2])+","+i(k[3])+","+i(-k[4])+","+i(-k[5])+","+i(-k[6])+","+i(-k[7])+","+i(k[8])+","+i(k[9])+","+i(k[10])+","+i(k[11])+","+i(k[12])+","+i(k[13])+","+i(k[14])+","+i(k[15])+")"};this.render=function(o,p){var n=0.5/Math.tan(THREE.Math.degToRad(p.fov*0.5))*d;this.domElement.style.WebkitPerspective=n+"px";this.domElement.style.MozPerspective=n+"px";this.domElement.style.oPerspective=n+"px";this.domElement.style.perspective=n+"px";var r=e.projectScene(o,p,false).objects;var j="translate3d(0,0,"+n+"px)"+f(p.matrixWorldInverse)+" translate3d("+h+"px,"+g+"px, 0)";this.cameraElement.style.WebkitTransform=j;this.cameraElement.style.MozTransform=j;this.cameraElement.style.oTransform=j;this.cameraElement.style.transform=j;for(var m=0,q=r.length;m<q;m++){var k=r[m].object;if(k instanceof THREE.CSS3DObject){var l=k.element;if(k instanceof THREE.CSS3DSprite){c.copy(p.matrixWorldInverse);c.transpose();c.copyPosition(k.matrixWorld);c.scale(k.scale);c.elements[3]=0;c.elements[7]=0;c.elements[11]=0;c.elements[15]=1;j=b(c)}else{j=b(k.matrixWorld)}l.style.WebkitTransform=j;l.style.MozTransform=j;l.style.oTransform=j;l.style.transform=j;if(l.parentNode!==this.cameraElement){this.cameraElement.appendChild(l)}}}}};